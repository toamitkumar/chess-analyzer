{"ast":null,"code":"import _asyncToGenerator from \"/Users/amit.kumar3/projects/chess-analysis/chessify/newfrontend/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from '@angular/common';\nimport { LayoutComponent } from '../../components/layout/layout.component';\nimport { ChessBoardComponent } from '../../components/chess-board/chess-board.component';\nimport { MoveQuality, MOVE_QUALITY_COLORS } from '../../constants/move-quality.constants';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = () => [];\nfunction GameDetailComponent_div_1_div_90_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 35)(2, \"span\", 36);\n    i0.ɵɵtext(3, \"Accuracy\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 40);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"p\", 25);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"text-success\", ((ctx_r1.phaseData == null ? null : ctx_r1.phaseData.opening == null ? null : ctx_r1.phaseData.opening.accuracy) || 0) >= 85);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", (ctx_r1.phaseData == null ? null : ctx_r1.phaseData.opening == null ? null : ctx_r1.phaseData.opening.accuracy) || 95, \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", (ctx_r1.phaseData == null ? null : ctx_r1.phaseData.opening == null ? null : ctx_r1.phaseData.opening.description) || \"Strong opening play, followed main theory\", \" \");\n  }\n}\nfunction GameDetailComponent_div_1_div_91_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 35)(2, \"span\", 36);\n    i0.ɵɵtext(3, \"Accuracy\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 40);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"p\", 25);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", (ctx_r1.phaseData == null ? null : ctx_r1.phaseData.middlegame == null ? null : ctx_r1.phaseData.middlegame.accuracy) || 84, \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", (ctx_r1.phaseData == null ? null : ctx_r1.phaseData.middlegame == null ? null : ctx_r1.phaseData.middlegame.description) || \"2 tactical mistakes in complex positions\", \" \");\n  }\n}\nfunction GameDetailComponent_div_1_div_92_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 35)(2, \"span\", 36);\n    i0.ɵɵtext(3, \"Accuracy\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 37);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"p\", 25);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", (ctx_r1.phaseData == null ? null : ctx_r1.phaseData.endgame == null ? null : ctx_r1.phaseData.endgame.accuracy) || 92, \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", (ctx_r1.phaseData == null ? null : ctx_r1.phaseData.endgame == null ? null : ctx_r1.phaseData.endgame.description) || \"Precise technique converted the advantage\", \" \");\n  }\n}\nfunction GameDetailComponent_div_1_ng_container_101_div_1__svg_svg_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 66);\n    i0.ɵɵelement(1, \"path\", 67)(2, \"path\", 68)(3, \"path\", 69);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction GameDetailComponent_div_1_ng_container_101_div_1__svg_svg_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 70);\n    i0.ɵɵelement(1, \"circle\", 71)(2, \"path\", 72)(3, \"path\", 73);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction GameDetailComponent_div_1_ng_container_101_div_1__svg_svg_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 74);\n    i0.ɵɵelement(1, \"path\", 75)(2, \"path\", 76);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction GameDetailComponent_div_1_ng_container_101_div_1_div_11__svg_svg_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 66);\n    i0.ɵɵelement(1, \"path\", 67)(2, \"path\", 68)(3, \"path\", 69);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction GameDetailComponent_div_1_ng_container_101_div_1_div_11__svg_svg_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 70);\n    i0.ɵɵelement(1, \"circle\", 71)(2, \"path\", 72)(3, \"path\", 73);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction GameDetailComponent_div_1_ng_container_101_div_1_div_11__svg_svg_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 74);\n    i0.ɵɵelement(1, \"path\", 75)(2, \"path\", 76);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction GameDetailComponent_div_1_ng_container_101_div_1_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 58);\n    i0.ɵɵlistener(\"click\", function GameDetailComponent_div_1_ng_container_101_div_1_div_11_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const i_r4 = i0.ɵɵnextContext(2).index;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.setCurrentMove(i_r4 + 1));\n    });\n    i0.ɵɵelementStart(1, \"span\", 59);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, GameDetailComponent_div_1_ng_container_101_div_1_div_11__svg_svg_3_Template, 4, 0, \"svg\", 60)(4, GameDetailComponent_div_1_ng_container_101_div_1_div_11__svg_svg_4_Template, 4, 0, \"svg\", 61)(5, GameDetailComponent_div_1_ng_container_101_div_1_div_11__svg_svg_5_Template, 3, 0, \"svg\", 62);\n    i0.ɵɵelementStart(6, \"span\", 63);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r4 = i0.ɵɵnextContext(2).index;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMap(ctx_r1.currentMove === i_r4 + 1 ? \"bg-accent/20 border border-accent\" : \"hover:bg-muted/50\");\n    i0.ɵɵattribute(\"data-move-index\", i_r4 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.analysis[i_r4 + 1].move);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.getMoveQuality(ctx_r1.analysis[i_r4 + 1]) === \"blunder\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.getMoveQuality(ctx_r1.analysis[i_r4 + 1]) === \"inaccuracy\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.getMoveQuality(ctx_r1.analysis[i_r4 + 1]) === \"excellent\" || ctx_r1.getMoveQuality(ctx_r1.analysis[i_r4 + 1]) === \"good\");\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(ctx_r1.getMoveQualityTextClass(ctx_r1.analysis[i_r4 + 1]));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.formatEvaluation(ctx_r1.analysis[i_r4 + 1].evaluation), \" \");\n  }\n}\nfunction GameDetailComponent_div_1_ng_container_101_div_1_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 77);\n  }\n}\nfunction GameDetailComponent_div_1_ng_container_101_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 56)(1, \"div\", 57);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 58);\n    i0.ɵɵlistener(\"click\", function GameDetailComponent_div_1_ng_container_101_div_1_Template_div_click_3_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const i_r4 = i0.ɵɵnextContext().index;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.setCurrentMove(i_r4));\n    });\n    i0.ɵɵelementStart(4, \"span\", 59);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, GameDetailComponent_div_1_ng_container_101_div_1__svg_svg_6_Template, 4, 0, \"svg\", 60)(7, GameDetailComponent_div_1_ng_container_101_div_1__svg_svg_7_Template, 4, 0, \"svg\", 61)(8, GameDetailComponent_div_1_ng_container_101_div_1__svg_svg_8_Template, 3, 0, \"svg\", 62);\n    i0.ɵɵelementStart(9, \"span\", 63);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(11, GameDetailComponent_div_1_ng_container_101_div_1_div_11_Template, 8, 10, \"div\", 64)(12, GameDetailComponent_div_1_ng_container_101_div_1_div_12_Template, 1, 0, \"div\", 65);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    const move_r7 = ctx_r5.$implicit;\n    const i_r4 = ctx_r5.index;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵattribute(\"data-move-pair\", ctx_r1.Math.floor(i_r4 / 2));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.Math.floor(i_r4 / 2) + 1, \". \");\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(ctx_r1.currentMove === i_r4 ? \"bg-accent/20 border border-accent\" : \"hover:bg-muted/50\");\n    i0.ɵɵattribute(\"data-move-index\", i_r4);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(move_r7.move);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.getMoveQuality(move_r7) === \"blunder\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.getMoveQuality(move_r7) === \"inaccuracy\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.getMoveQuality(move_r7) === \"excellent\" || ctx_r1.getMoveQuality(move_r7) === \"good\");\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(ctx_r1.getMoveQualityTextClass(move_r7));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.formatEvaluation(move_r7.evaluation), \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.analysis[i_r4 + 1]);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.analysis[i_r4 + 1]);\n  }\n}\nfunction GameDetailComponent_div_1_ng_container_101_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, GameDetailComponent_div_1_ng_container_101_div_1_Template, 13, 14, \"div\", 55);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const i_r4 = ctx.index;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", i_r4 % 2 === 0);\n  }\n}\nfunction GameDetailComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function GameDetailComponent_div_1_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.goBack());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(3, \"svg\", 5);\n    i0.ɵɵelement(4, \"path\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \" Back to Games \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(6, \"div\", 7)(7, \"span\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"span\", 8);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(10, \"svg\", 9);\n    i0.ɵɵelement(11, \"path\", 10)(12, \"path\", 11)(13, \"path\", 12)(14, \"path\", 13)(15, \"path\", 14)(16, \"path\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(18, \"div\", 16)(19, \"div\", 17)(20, \"div\", 18)(21, \"div\", 19)(22, \"div\", 20)(23, \"div\")(24, \"h3\", 21);\n    i0.ɵɵtext(25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"p\", 22);\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(28, \"div\", 23)(29, \"div\", 24);\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 25);\n    i0.ɵɵtext(32);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(33, \"div\", 26)(34, \"div\", 27)(35, \"div\", 28);\n    i0.ɵɵelement(36, \"app-vertical-win-probability\", 29);\n    i0.ɵɵelementStart(37, \"div\", 30)(38, \"app-chess-board\", 31);\n    i0.ɵɵlistener(\"moveChanged\", function GameDetailComponent_div_1_Template_app_chess_board_moveChanged_38_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onMoveChanged($event));\n    });\n    i0.ɵɵelementEnd()()()()()();\n    i0.ɵɵelementStart(39, \"div\", 32)(40, \"div\", 18)(41, \"div\", 19)(42, \"h3\", 21);\n    i0.ɵɵtext(43, \"Game Statistics\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(44, \"div\", 33)(45, \"div\", 34)(46, \"div\", 35)(47, \"span\", 36);\n    i0.ɵɵtext(48, \"Your Accuracy\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(49, \"span\", 37);\n    i0.ɵɵtext(50);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(51, \"div\", 38);\n    i0.ɵɵelement(52, \"div\", 39);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(53, \"div\", 34)(54, \"div\", 35)(55, \"span\", 36);\n    i0.ɵɵtext(56, \"Opponent Accuracy\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(57, \"span\", 40);\n    i0.ɵɵtext(58);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(59, \"div\", 38);\n    i0.ɵɵelement(60, \"div\", 41);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(61, \"div\", 42)(62, \"div\", 35)(63, \"span\", 36);\n    i0.ɵɵtext(64, \"Avg Centipawn Loss\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(65, \"span\", 40);\n    i0.ɵɵtext(66);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(67, \"div\", 35)(68, \"span\", 36);\n    i0.ɵɵtext(69, \"Blunders\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(70, \"span\", 43);\n    i0.ɵɵtext(71);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(72, \"div\", 35)(73, \"span\", 36);\n    i0.ɵɵtext(74, \"Inaccuracies\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(75, \"span\", 44);\n    i0.ɵɵtext(76);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(77, \"div\", 18)(78, \"div\", 19)(79, \"h3\", 21);\n    i0.ɵɵtext(80, \"Phase Analysis\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(81, \"div\", 26)(82, \"div\", 45)(83, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function GameDetailComponent_div_1_Template_button_click_83_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.selectedPhase = \"opening\");\n    });\n    i0.ɵɵtext(84, \" Opening \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(85, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function GameDetailComponent_div_1_Template_button_click_85_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.selectedPhase = \"middlegame\");\n    });\n    i0.ɵɵtext(86, \" Middle \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(87, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function GameDetailComponent_div_1_Template_button_click_87_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.selectedPhase = \"endgame\");\n    });\n    i0.ɵɵtext(88, \" End \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(89, \"div\", 47);\n    i0.ɵɵtemplate(90, GameDetailComponent_div_1_div_90_Template, 8, 4, \"div\", 48)(91, GameDetailComponent_div_1_div_91_Template, 8, 2, \"div\", 48)(92, GameDetailComponent_div_1_div_92_Template, 8, 2, \"div\", 48);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(93, \"div\", 49)(94, \"div\", 50)(95, \"div\", 19)(96, \"h3\", 21);\n    i0.ɵɵtext(97, \"Move List\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(98, \"div\", 51)(99, \"div\", 52)(100, \"div\", 53);\n    i0.ɵɵtemplate(101, GameDetailComponent_div_1_ng_container_101_Template, 2, 1, \"ng-container\", 54);\n    i0.ɵɵelementEnd()()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵclassMap(ctx_r1.getResultBadgeClass());\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.getResultText(), \" \");\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.game.event, \" \");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r1.playerName, \" vs \", ctx_r1.opponentName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r1.game.opening || \"Unknown Opening\", \" \\u2022 \", ctx_r1.game.date, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.game.result);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.getResultDescription());\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"moves\", ctx_r1.analysis || i0.ɵɵpureFunction0(37, _c0))(\"currentMove\", ctx_r1.currentMove);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"moves\", ctx_r1.analysis || i0.ɵɵpureFunction0(38, _c0))(\"currentMoveIndex\", ctx_r1.currentMove)(\"whitePlayer\", (ctx_r1.game == null ? null : ctx_r1.game.white_player) || \"\")(\"blackPlayer\", (ctx_r1.game == null ? null : ctx_r1.game.black_player) || \"\");\n    i0.ɵɵadvance(12);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.getPlayerAccuracy(), \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", ctx_r1.getPlayerAccuracy(), \"%\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.getOpponentAccuracy(), \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", ctx_r1.getOpponentAccuracy(), \"%\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r1.avgCentipawnLoss);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.blunders);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.inaccuracies);\n    i0.ɵɵadvance(7);\n    i0.ɵɵclassMap(ctx_r1.selectedPhase === \"opening\" ? \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-background text-foreground shadow-sm\" : \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(ctx_r1.selectedPhase === \"middlegame\" ? \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-background text-foreground shadow-sm\" : \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(ctx_r1.selectedPhase === \"endgame\" ? \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-background text-foreground shadow-sm\" : \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngSwitch\", ctx_r1.selectedPhase);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"opening\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"middlegame\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"endgame\");\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.analysis)(\"ngForTrackBy\", ctx_r1.trackByMoveIndex);\n  }\n}\nfunction GameDetailComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 78);\n    i0.ɵɵelement(1, \"div\", 79);\n    i0.ɵɵelementEnd();\n  }\n}\nexport let GameDetailComponent = /*#__PURE__*/(() => {\n  class GameDetailComponent {\n    constructor(route, router, http) {\n      this.route = route;\n      this.router = router;\n      this.http = http;\n      this.game = null;\n      this.analysis = [];\n      this.accuracyData = null;\n      this.phaseData = null;\n      this.loading = true;\n      this.error = null;\n      this.currentMove = 0;\n      this.selectedPhase = 'opening';\n    }\n    safeFloor(value) {\n      if (value == null || isNaN(value)) {\n        console.error('safeFloor called with invalid value:', value);\n        return 0;\n      }\n      return Math.floor(value);\n    }\n    ngOnInit() {\n      const gameId = this.route.snapshot.paramMap.get('id');\n      if (gameId) {\n        this.loadGameData(gameId);\n      }\n    }\n    loadGameData(gameId) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        try {\n          _this.loading = true;\n          const [gameResponse, analysisResponse, accuracyResponse, phaseResponse] = yield Promise.all([_this.http.get(`http://localhost:3000/api/games/${gameId}`).toPromise(), _this.http.get(`http://localhost:3000/api/games/${gameId}/analysis`).toPromise(), _this.http.get(`http://localhost:3000/api/games/${gameId}/accuracy`).toPromise(), _this.http.get(`http://localhost:3000/api/games/${gameId}/phases`).toPromise()]);\n          if (gameResponse && analysisResponse) {\n            _this.game = gameResponse;\n            _this.analysis = analysisResponse.analysis || [];\n            _this.accuracyData = accuracyResponse || null;\n            _this.phaseData = phaseResponse || null;\n          }\n        } catch (err) {\n          _this.error = err instanceof Error ? err.message : 'Failed to load game';\n        } finally {\n          _this.loading = false;\n        }\n      })();\n    }\n    get isPlayerWhite() {\n      return this.game?.white_player === 'AdvaitKumar1213';\n    }\n    get playerName() {\n      return this.isPlayerWhite ? this.game?.white_player || '' : this.game?.black_player || '';\n    }\n    get opponentName() {\n      return this.isPlayerWhite ? this.game?.black_player || '' : this.game?.white_player || '';\n    }\n    get movePairs() {\n      if (!this.analysis || this.analysis.length === 0) {\n        return [];\n      }\n      const pairs = [];\n      for (let i = 0; i < this.analysis.length; i += 2) {\n        const whiteMove = this.analysis[i];\n        const blackMove = this.analysis[i + 1];\n        pairs.push({\n          moveNumber: Math.floor(i / 2) + 1,\n          white: whiteMove,\n          black: blackMove,\n          whiteIndex: i,\n          blackIndex: i + 1\n        });\n      }\n      return pairs;\n    }\n    get playerMoves() {\n      if (!this.analysis) return [];\n      return this.analysis.filter((_, idx) => this.isPlayerWhite ? idx % 2 === 0 : idx % 2 === 1);\n    }\n    get opponentMoves() {\n      if (!this.analysis) return [];\n      return this.analysis.filter((_, idx) => this.isPlayerWhite ? idx % 2 === 1 : idx % 2 === 0);\n    }\n    get blunders() {\n      return this.playerMoves.filter(move => move.is_blunder).length;\n    }\n    get inaccuracies() {\n      return this.playerMoves.filter(move => !move.is_blunder && move.centipawn_loss > 100).length;\n    }\n    get avgCentipawnLoss() {\n      return this.playerMoves.length > 0 ? Math.round(this.playerMoves.reduce((sum, move) => sum + move.centipawn_loss, 0) / this.playerMoves.length) : 0;\n    }\n    getResultBadgeClass() {\n      const result = this.getResultText();\n      if (result === 'Win') return 'inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-success text-success-foreground';\n      if (result === 'Loss') return 'inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-destructive text-destructive-foreground';\n      return 'inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-muted text-muted-foreground';\n    }\n    getResultText() {\n      if (!this.game) return 'Draw';\n      if (this.game.result === '1-0') return this.isPlayerWhite ? 'Win' : 'Loss';\n      if (this.game.result === '0-1') return this.isPlayerWhite ? 'Loss' : 'Win';\n      return 'Draw';\n    }\n    getResultDescription() {\n      if (!this.game) return 'Draw';\n      if (this.game.result === '1-0') return 'White wins';\n      if (this.game.result === '0-1') return 'Black wins';\n      return 'Draw';\n    }\n    getMoveRowClass(moveIndex) {\n      return this.currentMove != null && this.safeFloor(this.currentMove / 2) === moveIndex ? 'border-accent bg-accent/10' : 'border-border hover:bg-muted/50';\n    }\n    getMoveQualityColor(centipawnLoss, isBlunder) {\n      if (isBlunder) return 'text-destructive';\n      if (centipawnLoss > 100) return 'text-warning';\n      return 'text-success';\n    }\n    formatEvaluation(evaluation) {\n      const evalValue = evaluation / 100;\n      return (evalValue > 0 ? '+' : '') + evalValue.toFixed(1);\n    }\n    getPlayerAccuracy() {\n      return this.accuracyData?.playerAccuracy || 0;\n    }\n    getOpponentAccuracy() {\n      return this.accuracyData?.opponentAccuracy || 0;\n    }\n    setCurrentMove(move) {\n      if (!this.analysis || this.analysis.length === 0) {\n        this.currentMove = 0;\n        return;\n      }\n      this.currentMove = Math.max(0, Math.min(this.analysis.length - 1, move));\n      this.scrollToCurrentMove();\n    }\n    previousMove() {\n      this.setCurrentMove(this.currentMove - 1);\n    }\n    nextMove() {\n      this.setCurrentMove(this.currentMove + 1);\n    }\n    goBack() {\n      this.router.navigate(['/games']);\n    }\n    getInitialPosition() {\n      // Standard starting position\n      return 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1';\n    }\n    onMoveChanged(moveIndex) {\n      this.currentMove = moveIndex;\n      this.scrollToCurrentMove();\n    }\n    trackByMoveIndex(index, move) {\n      return index;\n    }\n    scrollToCurrentMove() {\n      setTimeout(() => {\n        const currentMoveElement = document.querySelector(`[data-move-index=\"${this.currentMove}\"]`);\n        if (currentMoveElement) {\n          currentMoveElement.scrollIntoView({\n            behavior: 'smooth',\n            block: 'center'\n          });\n        }\n      }, 100);\n    }\n    getMoveQuality(move) {\n      // Check for book moves (first 10 moves typically)\n      if (move.move_number <= 5) return MoveQuality.BOOK;\n      // Check for best moves (low centipawn loss)\n      if (move.centipawn_loss <= 5) return MoveQuality.BEST;\n      if (move.is_blunder) return MoveQuality.BLUNDER;\n      if (move.is_mistake) return MoveQuality.MISTAKE;\n      if (move.is_inaccuracy) return MoveQuality.INACCURACY;\n      if (move.centipawn_loss <= 10) return MoveQuality.EXCELLENT;\n      return MoveQuality.GOOD;\n    }\n    getMoveQualityStyle(move) {\n      const quality = this.getMoveQuality(move);\n      const colors = MOVE_QUALITY_COLORS[quality];\n      if (!colors) return {};\n      return {\n        'background-color': colors.background,\n        'color': colors.text,\n        'border-color': colors.border,\n        'padding': '2px 6px',\n        'border-radius': '4px',\n        'font-weight': '600',\n        'font-size': '10px',\n        'border': '1px solid'\n      };\n    }\n    getMoveQualityClass(move) {\n      const quality = this.getMoveQuality(move);\n      const colors = MOVE_QUALITY_COLORS[quality];\n      return colors ? `text-[${colors.text}] bg-[${colors.background}]` : '';\n    }\n    getMoveQualityTextClass(move) {\n      if (!move) return 'text-muted-foreground';\n      const quality = this.getMoveQuality(move);\n      switch (quality) {\n        case 'blunder':\n          return 'text-destructive';\n        case 'inaccuracy':\n          return 'text-warning';\n        case 'excellent':\n        case 'good':\n          return 'text-success';\n        default:\n          return 'text-muted-foreground';\n      }\n    }\n    static {\n      this.ɵfac = function GameDetailComponent_Factory(t) {\n        return new (t || GameDetailComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HttpClient));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: GameDetailComponent,\n        selectors: [[\"app-game-detail\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 4,\n        vars: 2,\n        consts: [[\"loadingTemplate\", \"\"], [\"class\", \"space-y-6\", 4, \"ngIf\", \"ngIfElse\"], [1, \"space-y-6\"], [1, \"flex\", \"items-center\", \"gap-4\"], [1, \"inline-flex\", \"items-center\", \"justify-center\", \"rounded-md\", \"text-sm\", \"font-medium\", \"ring-offset-background\", \"transition-colors\", \"focus-visible:outline-none\", \"focus-visible:ring-2\", \"focus-visible:ring-ring\", \"focus-visible:ring-offset-2\", \"disabled:pointer-events-none\", \"disabled:opacity-50\", \"hover:bg-accent\", \"hover:text-accent-foreground\", \"h-9\", \"px-3\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"mr-2\", \"h-4\", \"w-4\"], [\"d\", \"m15 18-6-6 6-6\"], [1, \"flex\", \"items-center\", \"gap-2\"], [1, \"inline-flex\", \"items-center\", \"rounded-full\", \"border\", \"px-2.5\", \"py-0.5\", \"text-xs\", \"font-semibold\", \"transition-colors\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-ring\", \"focus:ring-offset-2\", \"border-transparent\", \"bg-secondary\", \"text-secondary-foreground\", \"hover:bg-secondary/80\", \"gap-1\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"12\", \"height\", \"12\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"h-3\", \"w-3\"], [\"d\", \"M6 9H4.5a2.5 2.5 0 0 1 0-5H6\"], [\"d\", \"M18 9h1.5a2.5 2.5 0 0 0 0-5H18\"], [\"d\", \"M4 22h16\"], [\"d\", \"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22\"], [\"d\", \"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22\"], [\"d\", \"M18 2H6v7a6 6 0 0 0 12 0V2Z\"], [1, \"flex\", \"gap-6\"], [1, \"flex-1\", \"space-y-6\"], [1, \"rounded-lg\", \"border\", \"bg-card\", \"text-card-foreground\", \"shadow-sm\"], [1, \"flex\", \"flex-col\", \"space-y-1.5\", \"p-6\"], [1, \"flex\", \"items-center\", \"justify-between\"], [1, \"text-2xl\", \"font-semibold\", \"leading-none\", \"tracking-tight\"], [1, \"text-sm\", \"text-muted-foreground\"], [1, \"text-right\"], [1, \"text-2xl\", \"font-bold\", \"text-foreground\"], [1, \"text-xs\", \"text-muted-foreground\"], [1, \"p-6\", \"pt-0\"], [1, \"space-y-4\"], [1, \"flex\", \"gap-4\", \"items-center\"], [3, \"moves\", \"currentMove\"], [1, \"flex-1\"], [3, \"moveChanged\", \"moves\", \"currentMoveIndex\", \"whitePlayer\", \"blackPlayer\"], [1, \"grid\", \"grid-cols-2\", \"gap-6\"], [1, \"p-6\", \"pt-0\", \"space-y-4\"], [1, \"space-y-2\"], [1, \"flex\", \"justify-between\", \"text-sm\"], [1, \"text-muted-foreground\"], [1, \"font-semibold\", \"text-success\"], [1, \"h-2\", \"w-full\", \"overflow-hidden\", \"rounded-full\", \"bg-muted\"], [1, \"h-full\", \"bg-success\"], [1, \"font-semibold\"], [1, \"h-full\", \"bg-chart-1\"], [1, \"pt-4\", \"space-y-3\", \"border-t\", \"border-border\"], [1, \"font-semibold\", \"text-destructive\"], [1, \"font-semibold\", \"text-warning\"], [1, \"inline-flex\", \"h-10\", \"items-center\", \"justify-center\", \"rounded-md\", \"bg-muted\", \"p-1\", \"text-muted-foreground\", \"w-full\"], [1, \"flex-1\", 3, \"click\"], [1, \"space-y-2\", \"pt-4\", 3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [1, \"w-80\"], [1, \"rounded-lg\", \"border\", \"bg-card\", \"text-card-foreground\", \"shadow-sm\", \"h-[calc(100vh-12rem)]\"], [1, \"p-0\"], [1, \"h-[calc(100vh-18rem)]\", \"overflow-auto\", \"px-6\"], [1, \"space-y-2\", \"pb-4\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"class\", \"grid grid-cols-[40px_1fr_1fr] gap-3 rounded-lg border p-2 text-sm border-border\", 4, \"ngIf\"], [1, \"grid\", \"grid-cols-[40px_1fr_1fr]\", \"gap-3\", \"rounded-lg\", \"border\", \"p-2\", \"text-sm\", \"border-border\"], [1, \"font-medium\", \"text-muted-foreground\"], [1, \"flex\", \"items-center\", \"gap-1\", \"cursor-pointer\", \"rounded\", \"px-2\", \"py-1\", \"transition-colors\", 3, \"click\"], [1, \"font-medium\"], [\"class\", \"h-4 w-4 text-destructive\", \"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 4, \"ngIf\"], [\"class\", \"h-4 w-4 text-warning\", \"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 4, \"ngIf\"], [\"class\", \"h-4 w-4 text-success\", \"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 4, \"ngIf\"], [1, \"text-xs\"], [\"class\", \"flex items-center gap-1 cursor-pointer rounded px-2 py-1 transition-colors\", 3, \"class\", \"click\", 4, \"ngIf\"], [\"class\", \"\", 4, \"ngIf\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"h-4\", \"w-4\", \"text-destructive\"], [\"d\", \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\"], [\"d\", \"M12 9v4\"], [\"d\", \"m12 17 .01 0\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"h-4\", \"w-4\", \"text-warning\"], [\"cx\", \"12\", \"cy\", \"12\", \"r\", \"10\"], [\"d\", \"m12 8 0 8\"], [\"d\", \"m8 12 8 0\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"h-4\", \"w-4\", \"text-success\"], [\"d\", \"M22 11.08V12a10 10 0 1 1-5.93-9.14\"], [\"d\", \"m9 11 3 3L22 4\"], [1, \"\"], [1, \"flex\", \"items-center\", \"justify-center\", \"h-64\"], [1, \"animate-spin\", \"rounded-full\", \"h-8\", \"w-8\", \"border-b-2\", \"border-gray-900\"]],\n        template: function GameDetailComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"app-layout\");\n            i0.ɵɵtemplate(1, GameDetailComponent_div_1_Template, 102, 39, \"div\", 1)(2, GameDetailComponent_ng_template_2_Template, 2, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            const loadingTemplate_r8 = i0.ɵɵreference(3);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.game)(\"ngIfElse\", loadingTemplate_r8);\n          }\n        },\n        dependencies: [CommonModule, i3.NgForOf, i3.NgIf, i3.NgSwitch, i3.NgSwitchCase, LayoutComponent, ChessBoardComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return GameDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}