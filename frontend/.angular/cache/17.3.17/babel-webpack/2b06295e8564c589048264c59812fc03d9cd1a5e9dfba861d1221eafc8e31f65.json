{"ast":null,"code":"import * as board from './board.js';\nimport * as util from './util.js';\nimport { cancel as dragCancel } from './drag.js';\nexport function setDropMode(s, piece) {\n  s.dropmode = {\n    active: true,\n    piece\n  };\n  dragCancel(s);\n}\nexport function cancelDropMode(s) {\n  s.dropmode = {\n    active: false\n  };\n}\nexport function drop(s, e) {\n  if (!s.dropmode.active) return;\n  board.unsetPremove(s);\n  board.unsetPredrop(s);\n  const piece = s.dropmode.piece;\n  if (piece) {\n    s.pieces.set('a0', piece);\n    const position = util.eventPosition(e);\n    const dest = position && board.getKeyAtDomPos(position, board.whitePov(s), s.dom.bounds());\n    if (dest) board.dropNewPiece(s, 'a0', dest);\n  }\n  s.dom.redraw();\n}\n//# sourceMappingURL=drop.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}