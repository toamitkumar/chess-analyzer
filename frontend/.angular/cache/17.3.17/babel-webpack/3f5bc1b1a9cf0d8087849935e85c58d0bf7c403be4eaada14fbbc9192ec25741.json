{"ast":null,"code":"import _asyncToGenerator from \"/Users/amit.kumar3/projects/chess-analysis/chessify/newfrontend/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar __esDecorate = this && this.__esDecorate || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) {\n    if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\");\n    return f;\n  }\n  var kind = contextIn.kind,\n    key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _,\n    done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    var context = {};\n    for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n    for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n    context.addInitializer = function (f) {\n      if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\");\n      extraInitializers.push(accept(f || null));\n    };\n    var result = (0, decorators[i])(kind === \"accessor\" ? {\n      get: descriptor.get,\n      set: descriptor.set\n    } : descriptor[key], context);\n    if (kind === \"accessor\") {\n      if (result === void 0) continue;\n      if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n      if (_ = accept(result.get)) descriptor.get = _;\n      if (_ = accept(result.set)) descriptor.set = _;\n      if (_ = accept(result.init)) initializers.unshift(_);\n    } else if (_ = accept(result)) {\n      if (kind === \"field\") initializers.unshift(_);else descriptor[key] = _;\n    }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\nvar __runInitializers = this && this.__runInitializers || function (thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n    value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LayoutComponent } from '../../components/layout/layout.component';\nimport { ChessBoardComponent } from '../../components/chess-board/chess-board.component';\nimport { MoveEvaluationComponent } from '../../components/move-evaluation/move-evaluation.component';\nimport { MoveQuality, MOVE_QUALITY_COLORS } from '../../constants/move-quality.constants';\nlet GameDetailComponent = (() => {\n  let _classDecorators = [Component({\n    selector: 'app-game-detail',\n    standalone: true,\n    imports: [CommonModule, LayoutComponent, ChessBoardComponent, MoveEvaluationComponent, VerticalWinProbabilityComponent],\n    template: `\n    <app-layout>\n      <div class=\"space-y-6\" *ngIf=\"!loading && game; else loadingTemplate\">\n        <div class=\"flex items-center gap-4\">\n          <button\n            (click)=\"goBack()\"\n            class=\"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 px-3\">\n            <svg class=\"mr-2 h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n              <path d=\"m15 18-6-6 6-6\"/>\n            </svg>\n            Back to Games\n          </button>\n          <div class=\"flex items-center gap-2\">\n            <span [class]=\"getResultBadgeClass()\">\n              {{ getResultText() }}\n            </span>\n            <span class=\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80 gap-1\">\n              <svg class=\"h-3 w-3\" xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path d=\"M6 9H4.5a2.5 2.5 0 0 1 0-5H6\"/>\n                <path d=\"M18 9h1.5a2.5 2.5 0 0 0 0-5H18\"/>\n                <path d=\"M4 22h16\"/>\n                <path d=\"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22\"/>\n                <path d=\"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22\"/>\n                <path d=\"M18 2H6v7a6 6 0 0 0 12 0V2Z\"/>\n              </svg>\n              {{ game.event }}\n            </span>\n          </div>\n        </div>\n\n        <div class=\"flex gap-6\">\n          <!-- Left column: Board with vertical probability indicator -->\n          <div class=\"flex-1 space-y-6\">\n            <div class=\"rounded-lg border bg-card text-card-foreground shadow-sm\">\n              <div class=\"flex flex-col space-y-1.5 p-6\">\n                <div class=\"flex items-center justify-between\">\n                  <div>\n                    <h3 class=\"text-2xl font-semibold leading-none tracking-tight\">{{ playerName }} vs {{ opponentName }}</h3>\n                    <p class=\"text-sm text-muted-foreground\">{{ game.opening || 'Unknown Opening' }} • {{ game.date }}</p>\n                  </div>\n                  <div class=\"text-right\">\n                    <div class=\"text-2xl font-bold text-foreground\">{{ game.result }}</div>\n                    <div class=\"text-xs text-muted-foreground\">{{ getResultDescription() }}</div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"p-6 pt-0\">\n                <div class=\"space-y-4\">\n                  <!-- Board with vertical probability -->\n                  <div class=\"flex gap-4 items-center\">\n                    <app-vertical-win-probability \n                      [moves]=\"analysis || []\" \n                      [currentMove]=\"currentMove\">\n                    </app-vertical-win-probability>\n                    <div class=\"flex-1\">\n                      <app-chess-board \n                        [moves]=\"analysis || []\"\n                        [currentMoveIndex]=\"currentMove\"\n                        [whitePlayer]=\"game?.white_player || ''\"\n                        [blackPlayer]=\"game?.black_player || ''\"\n                        (moveChanged)=\"onMoveChanged($event)\">\n                      </app-chess-board>\n                    </div>\n                  </div>\n\n\n                </div>\n              </div>\n            </div>\n\n            <!-- Statistics and Phase Analysis below board -->\n            <div class=\"grid grid-cols-2 gap-6\">\n              <div class=\"rounded-lg border bg-card text-card-foreground shadow-sm\">\n                <div class=\"flex flex-col space-y-1.5 p-6\">\n                  <h3 class=\"text-2xl font-semibold leading-none tracking-tight\">Game Statistics</h3>\n                </div>\n                <div class=\"p-6 pt-0 space-y-4\">\n                  <div class=\"space-y-2\">\n                    <div class=\"flex justify-between text-sm\">\n                      <span class=\"text-muted-foreground\">Your Accuracy</span>\n                      <span class=\"font-semibold text-success\">{{ getPlayerAccuracy() }}%</span>\n                    </div>\n                    <div class=\"h-2 w-full overflow-hidden rounded-full bg-muted\">\n                      <div class=\"h-full bg-success\" [style.width.%]=\"getPlayerAccuracy()\"></div>\n                    </div>\n                  </div>\n                  \n                  <div class=\"space-y-2\">\n                    <div class=\"flex justify-between text-sm\">\n                      <span class=\"text-muted-foreground\">Opponent Accuracy</span>\n                      <span class=\"font-semibold\">{{ getOpponentAccuracy() }}%</span>\n                    </div>\n                    <div class=\"h-2 w-full overflow-hidden rounded-full bg-muted\">\n                      <div class=\"h-full bg-chart-1\" [style.width.%]=\"getOpponentAccuracy()\"></div>\n                    </div>\n                  </div>\n\n                  <div class=\"pt-4 space-y-3 border-t border-border\">\n                    <div class=\"flex justify-between text-sm\">\n                      <span class=\"text-muted-foreground\">Avg Centipawn Loss</span>\n                      <span class=\"font-semibold\">{{ avgCentipawnLoss }}</span>\n                    </div>\n                    <div class=\"flex justify-between text-sm\">\n                      <span class=\"text-muted-foreground\">Blunders</span>\n                      <span class=\"font-semibold text-destructive\">{{ blunders }}</span>\n                    </div>\n                    <div class=\"flex justify-between text-sm\">\n                      <span class=\"text-muted-foreground\">Inaccuracies</span>\n                      <span class=\"font-semibold text-warning\">{{ inaccuracies }}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"rounded-lg border bg-card text-card-foreground shadow-sm\">\n                <div class=\"flex flex-col space-y-1.5 p-6\">\n                  <h3 class=\"text-2xl font-semibold leading-none tracking-tight\">Phase Analysis</h3>\n                </div>\n                <div class=\"p-6 pt-0\">\n                  <div class=\"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground w-full\">\n                    <button\n                      (click)=\"selectedPhase = 'opening'\"\n                      [class]=\"selectedPhase === 'opening' ? 'inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-background text-foreground shadow-sm' : 'inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50'\"\n                      class=\"flex-1\">\n                      Opening\n                    </button>\n                    <button\n                      (click)=\"selectedPhase = 'middlegame'\"\n                      [class]=\"selectedPhase === 'middlegame' ? 'inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-background text-foreground shadow-sm' : 'inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50'\"\n                      class=\"flex-1\">\n                      Middle\n                    </button>\n                    <button\n                      (click)=\"selectedPhase = 'endgame'\"\n                      [class]=\"selectedPhase === 'endgame' ? 'inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-background text-foreground shadow-sm' : 'inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50'\"\n                      class=\"flex-1\">\n                      End\n                    </button>\n                  </div>\n                  \n                  <div class=\"space-y-2 pt-4\" [ngSwitch]=\"selectedPhase\">\n                    <div *ngSwitchCase=\"'opening'\">\n                      <div class=\"flex justify-between text-sm\">\n                        <span class=\"text-muted-foreground\">Accuracy</span>\n                        <span class=\"font-semibold\" [class.text-success]=\"(phaseData?.opening?.accuracy || 0) >= 85\">{{ phaseData?.opening?.accuracy || 95 }}%</span>\n                      </div>\n                      <p class=\"text-xs text-muted-foreground\">\n                        {{ phaseData?.opening?.description || 'Strong opening play, followed main theory' }}\n                      </p>\n                    </div>\n                    <div *ngSwitchCase=\"'middlegame'\">\n                      <div class=\"flex justify-between text-sm\">\n                        <span class=\"text-muted-foreground\">Accuracy</span>\n                        <span class=\"font-semibold\">{{ phaseData?.middlegame?.accuracy || 84 }}%</span>\n                      </div>\n                      <p class=\"text-xs text-muted-foreground\">\n                        {{ phaseData?.middlegame?.description || '2 tactical mistakes in complex positions' }}\n                      </p>\n                    </div>\n                    <div *ngSwitchCase=\"'endgame'\">\n                      <div class=\"flex justify-between text-sm\">\n                        <span class=\"text-muted-foreground\">Accuracy</span>\n                        <span class=\"font-semibold text-success\">{{ phaseData?.endgame?.accuracy || 92 }}%</span>\n                      </div>\n                      <p class=\"text-xs text-muted-foreground\">\n                        {{ phaseData?.endgame?.description || 'Precise technique converted the advantage' }}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Right column: Scrollable move list -->\n          <div class=\"w-80\">\n            <div class=\"rounded-lg border bg-card text-card-foreground shadow-sm h-[calc(100vh-12rem)]\">\n              <div class=\"flex flex-col space-y-1.5 p-6\">\n                <h3 class=\"text-2xl font-semibold leading-none tracking-tight\">Move List</h3>\n              </div>\n              <div class=\"p-0\">\n                <div class=\"h-[calc(100vh-18rem)] overflow-auto px-6\">\n                  <div class=\"space-y-2 pb-4\">\n                    <div *ngFor=\"let pair of movePairs; trackBy: trackByMoveNumber\"\n                         class=\"grid grid-cols-[40px_1fr_1fr] gap-3 rounded-lg border border-border p-2 text-sm\">\n                      <div class=\"font-medium text-muted-foreground\">\n                        {{ pair.moveNumber }}.\n                      </div>\n                      <!-- White move -->\n                      <div class=\"flex flex-col cursor-pointer rounded px-2 py-1 transition-colors\"\n                           [class]=\"currentMove === pair.whiteIndex ? 'bg-accent/20 border border-accent' : 'hover:bg-muted/50'\"\n                           [attr.data-move-index]=\"pair.whiteIndex\">\n                        <div class=\"flex items-center gap-1\" (click)=\"setCurrentMove(pair.whiteIndex)\">\n                          <div class=\"flex flex-col flex-1\">\n                            <div class=\"flex items-center gap-1\">\n                              <span class=\"font-medium\">{{ pair.white.move }}</span>\n                              <span class=\"text-sm\" *ngIf=\"getMoveQualityIcon(getMoveQuality(pair.white))\">\n                                {{ getMoveQualityIcon(getMoveQuality(pair.white)) }}\n                              </span>\n                              <button class=\"ml-auto p-0.5 hover:bg-gray-200 rounded\" \n                                      *ngIf=\"shouldShowVariants(pair.white)\"\n                                      (click)=\"toggleVariants(pair.whiteIndex); $event.stopPropagation()\">\n                                <svg [class.rotate-180]=\"pair.white.showVariants\" class=\"h-3 w-3 transition-transform\">\n                                  <path d=\"M6 9l6 6 6-6\"/>\n                                </svg>\n                              </button>\n                            </div>\n                            <div class=\"flex items-center gap-2 text-xs mt-0.5\">\n                              <span class=\"font-mono\" [class]=\"getMoveQualityTextClass(pair.white)\">\n                                {{ formatEvaluation(pair.white.evaluation) }}\n                              </span>\n                              <span class=\"text-red-600 font-medium\" *ngIf=\"pair.white.centipawn_loss > 0\">\n                                (-{{ pair.white.centipawn_loss }}cp)\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                        \n                        <!-- Move Variants -->\n                        <div class=\"move-variants mt-2 p-2 bg-orange-50 border border-orange-200 rounded text-xs\" \n                             *ngIf=\"pair.white.showVariants && shouldShowVariants(pair.white)\">\n                          <div class=\"font-medium text-gray-600 mb-1\">Engine suggests:</div>\n                          <div class=\"space-y-1\">\n                            <div class=\"variant-item p-1 rounded border cursor-pointer hover:bg-blue-50\" \n                                 *ngFor=\"let variant of pair.white.variants; let vi = index\"\n                                 [class]=\"getVariantEvaluationClass(variant)\">\n                              <div class=\"flex items-center gap-2\">\n                                <span class=\"text-gray-500 min-w-[2rem]\">{{ vi === 0 ? 'Best:' : '#' + (vi + 1) + ':' }}</span>\n                                <span class=\"font-mono font-semibold text-blue-700\">{{ variant.move }}</span>\n                                <span class=\"font-mono text-gray-600\">{{ formatEvaluation(variant.evaluation) }}</span>\n                                <span class=\"font-mono text-green-600 font-medium\">(+{{ variant.evaluationDiff.toFixed(1) }})</span>\n                              </div>\n                            </div>\n                          </div>\n                          <div class=\"text-center mt-2 text-gray-500\">Click to preview on board</div>\n                        </div>\n                      </div>\n                      <!-- Black move -->\n                      <div *ngIf=\"pair.black\" \n                           class=\"flex flex-col cursor-pointer rounded px-2 py-1 transition-colors\"\n                           [class]=\"currentMove === pair.blackIndex ? 'bg-accent/20 border border-accent' : 'hover:bg-muted/50'\"\n                           [attr.data-move-index]=\"pair.blackIndex\">\n                        <div class=\"flex items-center gap-1\" (click)=\"setCurrentMove(pair.blackIndex)\">\n                          <div class=\"flex flex-col flex-1\">\n                            <div class=\"flex items-center gap-1\">\n                              <span class=\"font-medium\">{{ pair.black.move }}</span>\n                              <span class=\"text-sm\" *ngIf=\"getMoveQualityIcon(getMoveQuality(pair.black))\">\n                                {{ getMoveQualityIcon(getMoveQuality(pair.black)) }}\n                              </span>\n                              <button class=\"ml-auto p-0.5 hover:bg-gray-200 rounded\" \n                                      *ngIf=\"shouldShowVariants(pair.black)\"\n                                      (click)=\"toggleVariants(pair.blackIndex); $event.stopPropagation()\">\n                                <svg [class.rotate-180]=\"pair.black.showVariants\" class=\"h-3 w-3 transition-transform\">\n                                  <path d=\"M6 9l6 6 6-6\"/>\n                                </svg>\n                              </button>\n                            </div>\n                            <div class=\"flex items-center gap-2 text-xs mt-0.5\">\n                              <span class=\"font-mono\" [class]=\"getMoveQualityTextClass(pair.black)\">\n                                {{ formatEvaluation(pair.black.evaluation) }}\n                              </span>\n                              <span class=\"text-red-600 font-medium\" *ngIf=\"pair.black.centipawn_loss > 0\">\n                                (-{{ pair.black.centipawn_loss }}cp)\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                        \n                        <!-- Move Variants -->\n                        <div class=\"move-variants mt-2 p-2 bg-orange-50 border border-orange-200 rounded text-xs\" \n                             *ngIf=\"pair.black.showVariants && shouldShowVariants(pair.black)\">\n                          <div class=\"font-medium text-gray-600 mb-1\">Engine suggests:</div>\n                          <div class=\"space-y-1\">\n                            <div class=\"variant-item p-1 rounded border cursor-pointer hover:bg-blue-50\" \n                                 *ngFor=\"let variant of pair.black.variants; let vi = index\"\n                                 [class]=\"getVariantEvaluationClass(variant)\">\n                              <div class=\"flex items-center gap-2\">\n                                <span class=\"text-gray-500 min-w-[2rem]\">{{ vi === 0 ? 'Best:' : '#' + (vi + 1) + ':' }}</span>\n                                <span class=\"font-mono font-semibold text-blue-700\">{{ variant.move }}</span>\n                                <span class=\"font-mono text-gray-600\">{{ formatEvaluation(variant.evaluation) }}</span>\n                                <span class=\"font-mono text-green-600 font-medium\">(+{{ variant.evaluationDiff.toFixed(1) }})</span>\n                              </div>\n                            </div>\n                          </div>\n                          <div class=\"text-center mt-2 text-gray-500\">Click to preview on board</div>\n                        </div>\n                      </div>\n                      <div *ngIf=\"!pair.black\" class=\"\"></div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <ng-template #loadingTemplate>\n        <div class=\"flex items-center justify-center h-64\">\n          <div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"></div>\n        </div>\n      </ng-template>\n    </app-layout>\n  `\n  })];\n  let _classDescriptor;\n  let _classExtraInitializers = [];\n  let _classThis;\n  var GameDetailComponent = class {\n    static {\n      _classThis = this;\n    }\n    static {\n      const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(null) : void 0;\n      __esDecorate(null, _classDescriptor = {\n        value: _classThis\n      }, _classDecorators, {\n        kind: \"class\",\n        name: _classThis.name,\n        metadata: _metadata\n      }, null, _classExtraInitializers);\n      GameDetailComponent = _classThis = _classDescriptor.value;\n      if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value: _metadata\n      });\n      __runInitializers(_classThis, _classExtraInitializers);\n    }\n    constructor(route, router, http) {\n      this.route = route;\n      this.router = router;\n      this.http = http;\n      this.game = null;\n      this.analysis = [];\n      this.accuracyData = null;\n      this.phaseData = null;\n      this.loading = true;\n      this.error = null;\n      this.currentMove = 0;\n      this.selectedPhase = 'opening';\n    }\n    safeFloor(value) {\n      if (value == null || isNaN(value)) {\n        console.error('safeFloor called with invalid value:', value);\n        return 0;\n      }\n      return Math.floor(value);\n    }\n    ngOnInit() {\n      const gameId = this.route.snapshot.paramMap.get('id');\n      if (gameId) {\n        this.loadGameData(gameId);\n      }\n    }\n    loadGameData(gameId) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        try {\n          _this.loading = true;\n          const [gameResponse, analysisResponse, accuracyResponse, phaseResponse] = yield Promise.all([_this.http.get(`http://localhost:3000/api/games/${gameId}`).toPromise(), _this.http.get(`http://localhost:3000/api/games/${gameId}/analysis`).toPromise(), _this.http.get(`http://localhost:3000/api/games/${gameId}/accuracy`).toPromise(), _this.http.get(`http://localhost:3000/api/games/${gameId}/phases`).toPromise()]);\n          if (gameResponse && analysisResponse) {\n            _this.game = gameResponse;\n            _this.analysis = analysisResponse.analysis || [];\n            _this.accuracyData = accuracyResponse || null;\n            _this.phaseData = phaseResponse || null;\n          }\n        } catch (err) {\n          _this.error = err instanceof Error ? err.message : 'Failed to load game';\n        } finally {\n          _this.loading = false;\n        }\n      })();\n    }\n    get isPlayerWhite() {\n      return this.game?.white_player === 'AdvaitKumar1213';\n    }\n    get playerName() {\n      return this.isPlayerWhite ? this.game?.white_player || '' : this.game?.black_player || '';\n    }\n    get opponentName() {\n      return this.isPlayerWhite ? this.game?.black_player || '' : this.game?.white_player || '';\n    }\n    get movePairs() {\n      if (!this.analysis || this.analysis.length === 0) {\n        return [];\n      }\n      const pairs = [];\n      for (let i = 0; i < this.analysis.length; i += 2) {\n        const whiteMove = this.analysis[i];\n        const blackMove = this.analysis[i + 1];\n        pairs.push({\n          moveNumber: Math.floor(i / 2) + 1,\n          white: whiteMove,\n          black: blackMove,\n          whiteIndex: i,\n          blackIndex: i + 1\n        });\n      }\n      return pairs;\n    }\n    get playerMoves() {\n      if (!this.analysis) return [];\n      return this.analysis.filter((_, idx) => this.isPlayerWhite ? idx % 2 === 0 : idx % 2 === 1);\n    }\n    get opponentMoves() {\n      if (!this.analysis) return [];\n      return this.analysis.filter((_, idx) => this.isPlayerWhite ? idx % 2 === 1 : idx % 2 === 0);\n    }\n    get blunders() {\n      return this.playerMoves.filter(move => move.is_blunder).length;\n    }\n    get inaccuracies() {\n      return this.playerMoves.filter(move => !move.is_blunder && move.centipawn_loss > 100).length;\n    }\n    get avgCentipawnLoss() {\n      return this.playerMoves.length > 0 ? Math.round(this.playerMoves.reduce((sum, move) => sum + move.centipawn_loss, 0) / this.playerMoves.length) : 0;\n    }\n    getResultBadgeClass() {\n      const result = this.getResultText();\n      if (result === 'Win') return 'inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-success text-success-foreground';\n      if (result === 'Loss') return 'inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-destructive text-destructive-foreground';\n      return 'inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-muted text-muted-foreground';\n    }\n    getResultText() {\n      if (!this.game) return 'Draw';\n      if (this.game.result === '1-0') return this.isPlayerWhite ? 'Win' : 'Loss';\n      if (this.game.result === '0-1') return this.isPlayerWhite ? 'Loss' : 'Win';\n      return 'Draw';\n    }\n    getResultDescription() {\n      if (!this.game) return 'Draw';\n      if (this.game.result === '1-0') return 'White wins';\n      if (this.game.result === '0-1') return 'Black wins';\n      return 'Draw';\n    }\n    getMoveRowClass(moveIndex) {\n      return this.currentMove != null && this.safeFloor(this.currentMove / 2) === moveIndex ? 'border-accent bg-accent/10' : 'border-border hover:bg-muted/50';\n    }\n    getMoveQualityColor(centipawnLoss, isBlunder) {\n      if (isBlunder) return 'text-destructive';\n      if (centipawnLoss > 100) return 'text-warning';\n      return 'text-success';\n    }\n    formatEvaluation(evaluation) {\n      const evalValue = evaluation / 100;\n      return (evalValue > 0 ? '+' : '') + evalValue.toFixed(1);\n    }\n    getPlayerAccuracy() {\n      return this.accuracyData?.playerAccuracy || 0;\n    }\n    getOpponentAccuracy() {\n      return this.accuracyData?.opponentAccuracy || 0;\n    }\n    setCurrentMove(move) {\n      if (!this.analysis || this.analysis.length === 0) {\n        this.currentMove = 0;\n        return;\n      }\n      this.currentMove = Math.max(0, Math.min(this.analysis.length - 1, move));\n      this.scrollToCurrentMove();\n    }\n    previousMove() {\n      this.setCurrentMove(this.currentMove - 1);\n    }\n    nextMove() {\n      this.setCurrentMove(this.currentMove + 1);\n    }\n    goBack() {\n      this.router.navigate(['/games']);\n    }\n    getInitialPosition() {\n      // Standard starting position\n      return 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1';\n    }\n    onMoveChanged(moveIndex) {\n      this.currentMove = moveIndex;\n      this.scrollToCurrentMove();\n    }\n    trackByMoveNumber(index, pair) {\n      return pair.moveNumber;\n    }\n    scrollToCurrentMove() {\n      setTimeout(() => {\n        const currentMoveElement = document.querySelector(`[data-move-index=\"${this.currentMove}\"]`);\n        if (currentMoveElement) {\n          currentMoveElement.scrollIntoView({\n            behavior: 'smooth',\n            block: 'center'\n          });\n        }\n      }, 100);\n    }\n    getMoveQuality(move) {\n      // Check for book moves (first 10 moves typically)\n      if (move.move_number <= 5) return MoveQuality.BOOK;\n      // Check for blunders first (highest priority)\n      if (move.is_blunder) return MoveQuality.BLUNDER;\n      // Check centipawn loss for other classifications\n      if (move.centipawn_loss > 200) return MoveQuality.BLUNDER;\n      if (move.centipawn_loss > 100) return MoveQuality.MISTAKE;\n      if (move.centipawn_loss > 50) return MoveQuality.INACCURACY;\n      if (move.centipawn_loss <= 5) return MoveQuality.BEST;\n      if (move.centipawn_loss <= 15) return MoveQuality.EXCELLENT;\n      return MoveQuality.GOOD;\n    }\n    getMoveQualityStyle(move) {\n      const quality = this.getMoveQuality(move);\n      const colors = MOVE_QUALITY_COLORS[quality];\n      if (!colors) return {};\n      return {\n        'background-color': colors.background,\n        'color': colors.text,\n        'border-color': colors.border,\n        'padding': '2px 6px',\n        'border-radius': '4px',\n        'font-weight': '600',\n        'font-size': '10px',\n        'border': '1px solid'\n      };\n    }\n    getMoveQualityClass(move) {\n      const quality = this.getMoveQuality(move);\n      const colors = MOVE_QUALITY_COLORS[quality];\n      return colors ? `text-[${colors.text}] bg-[${colors.background}]` : '';\n    }\n    getMoveQualityTextClass(move) {\n      if (!move) return 'text-muted-foreground';\n      const quality = this.getMoveQuality(move);\n      switch (quality) {\n        case 'blunder':\n          return 'text-destructive';\n        case 'mistake':\n          return 'text-orange-500';\n        case 'inaccuracy':\n          return 'text-warning';\n        case 'excellent':\n        case 'good':\n          return 'text-success';\n        default:\n          return 'text-muted-foreground';\n      }\n    }\n    shouldShowVariants(move) {\n      const quality = this.getMoveQuality(move);\n      return ['mistake', 'blunder', 'inaccuracy'].includes(quality) && move.variants && move.variants.length > 0;\n    }\n    toggleVariants(moveIndex) {\n      if (this.analysis && this.analysis[moveIndex]) {\n        this.analysis[moveIndex].showVariants = !this.analysis[moveIndex].showVariants;\n      }\n    }\n    getVariantEvaluationClass(variant) {\n      if (variant.evaluationDiff > 0.5) return 'much-better';\n      if (variant.evaluationDiff > 0.2) return 'better';\n      return 'slightly-better';\n    }\n    getMoveQualityIcon(quality) {\n      const icons = {\n        'mistake': '⚠️',\n        'blunder': '❌',\n        'inaccuracy': '?!'\n      };\n      return icons[quality] || '';\n    }\n  };\n  return GameDetailComponent = _classThis;\n})();\nexport { GameDetailComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}