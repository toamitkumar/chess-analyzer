{"ast":null,"code":"import _asyncToGenerator from \"/Users/amit.kumar3/projects/chess-analysis/chessify/newfrontend/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from '@angular/common';\nimport { LayoutComponent } from '../../components/layout/layout.component';\nimport { ChessBoardComponent } from '../../components/chess-board/chess-board.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = () => [];\nfunction GameDetailComponent_div_1_div_42_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 46);\n    i0.ɵɵlistener(\"click\", function GameDetailComponent_div_1_div_42_Template_div_click_0_listener() {\n      const i_r4 = i0.ɵɵrestoreView(_r3).index;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.setCurrentMove(i_r4));\n    });\n    i0.ɵɵelementStart(1, \"div\", 7)(2, \"span\", 47);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 48);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 49)(7, \"span\", 50);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const move_r5 = ctx.$implicit;\n    const i_r4 = ctx.index;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"bg-muted\", i_r4 === ctx_r1.currentMove);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r1.Math.floor(i_r4 / 2) + 1, \"\", i_r4 % 2 === 0 ? \".\" : \"...\", \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(move_r5.move);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(ctx_r1.getMoveQualityClass(move_r5));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.getMoveQuality(move_r5), \" \");\n  }\n}\nfunction GameDetailComponent_div_1_div_94_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 32)(2, \"span\", 33);\n    i0.ɵɵtext(3, \"Accuracy\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 37);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"p\", 25);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"text-success\", ((ctx_r1.phaseData == null ? null : ctx_r1.phaseData.opening == null ? null : ctx_r1.phaseData.opening.accuracy) || 0) >= 85);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", (ctx_r1.phaseData == null ? null : ctx_r1.phaseData.opening == null ? null : ctx_r1.phaseData.opening.accuracy) || 0, \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", (ctx_r1.phaseData == null ? null : ctx_r1.phaseData.opening == null ? null : ctx_r1.phaseData.opening.description) || \"Loading...\", \" \");\n  }\n}\nfunction GameDetailComponent_div_1_div_95_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 32)(2, \"span\", 33);\n    i0.ɵɵtext(3, \"Accuracy\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 37);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"p\", 25);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"text-success\", ((ctx_r1.phaseData == null ? null : ctx_r1.phaseData.middlegame == null ? null : ctx_r1.phaseData.middlegame.accuracy) || 0) >= 85);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", (ctx_r1.phaseData == null ? null : ctx_r1.phaseData.middlegame == null ? null : ctx_r1.phaseData.middlegame.accuracy) || 0, \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", (ctx_r1.phaseData == null ? null : ctx_r1.phaseData.middlegame == null ? null : ctx_r1.phaseData.middlegame.description) || \"Loading...\", \" \");\n  }\n}\nfunction GameDetailComponent_div_1_div_96_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 32)(2, \"span\", 33);\n    i0.ɵɵtext(3, \"Accuracy\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 37);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"p\", 25);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"text-success\", ((ctx_r1.phaseData == null ? null : ctx_r1.phaseData.endgame == null ? null : ctx_r1.phaseData.endgame.accuracy) || 0) >= 85);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", (ctx_r1.phaseData == null ? null : ctx_r1.phaseData.endgame == null ? null : ctx_r1.phaseData.endgame.accuracy) || 0, \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", (ctx_r1.phaseData == null ? null : ctx_r1.phaseData.endgame == null ? null : ctx_r1.phaseData.endgame.description) || \"Loading...\", \" \");\n  }\n}\nfunction GameDetailComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function GameDetailComponent_div_1_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.goBack());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(3, \"svg\", 5);\n    i0.ɵɵelement(4, \"path\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \" Back to Games \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(6, \"div\", 7)(7, \"span\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"span\", 8);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(10, \"svg\", 9);\n    i0.ɵɵelement(11, \"path\", 10)(12, \"path\", 11)(13, \"path\", 12)(14, \"path\", 13)(15, \"path\", 14)(16, \"path\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(18, \"div\", 16)(19, \"div\", 17)(20, \"div\", 18)(21, \"div\", 19)(22, \"div\", 20)(23, \"div\")(24, \"h3\", 21);\n    i0.ɵɵtext(25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"p\", 22);\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(28, \"div\", 23)(29, \"div\", 24);\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 25);\n    i0.ɵɵtext(32);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(33, \"div\", 26)(34, \"div\", 27)(35, \"app-chess-board\", 28);\n    i0.ɵɵlistener(\"moveChanged\", function GameDetailComponent_div_1_Template_app_chess_board_moveChanged_35_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onMoveChanged($event));\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(36, \"div\", 18)(37, \"div\", 19)(38, \"h3\", 21);\n    i0.ɵɵtext(39, \"Move List\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(40, \"div\", 26)(41, \"div\", 29);\n    i0.ɵɵtemplate(42, GameDetailComponent_div_1_div_42_Template, 9, 8, \"div\", 30);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(43, \"div\", 2)(44, \"div\", 18)(45, \"div\", 19)(46, \"h3\", 21);\n    i0.ɵɵtext(47, \"Game Statistics\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(48, \"div\", 31)(49, \"div\", 29)(50, \"div\", 32)(51, \"span\", 33);\n    i0.ɵɵtext(52, \"Your Accuracy\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(53, \"span\", 34);\n    i0.ɵɵtext(54);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(55, \"div\", 35);\n    i0.ɵɵelement(56, \"div\", 36);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(57, \"div\", 29)(58, \"div\", 32)(59, \"span\", 33);\n    i0.ɵɵtext(60, \"Opponent Accuracy\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(61, \"span\", 37);\n    i0.ɵɵtext(62);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(63, \"div\", 35);\n    i0.ɵɵelement(64, \"div\", 38);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(65, \"div\", 39)(66, \"div\", 32)(67, \"span\", 33);\n    i0.ɵɵtext(68, \"Avg Centipawn Loss\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(69, \"span\", 37);\n    i0.ɵɵtext(70);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(71, \"div\", 32)(72, \"span\", 33);\n    i0.ɵɵtext(73, \"Blunders\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(74, \"span\", 40);\n    i0.ɵɵtext(75);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(76, \"div\", 32)(77, \"span\", 33);\n    i0.ɵɵtext(78, \"Inaccuracies\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(79, \"span\", 41);\n    i0.ɵɵtext(80);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(81, \"div\", 18)(82, \"div\", 19)(83, \"h3\", 21);\n    i0.ɵɵtext(84, \"Phase Analysis\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(85, \"div\", 26)(86, \"div\", 42)(87, \"button\", 43);\n    i0.ɵɵlistener(\"click\", function GameDetailComponent_div_1_Template_button_click_87_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.selectedPhase = \"opening\");\n    });\n    i0.ɵɵtext(88, \" Opening \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(89, \"button\", 43);\n    i0.ɵɵlistener(\"click\", function GameDetailComponent_div_1_Template_button_click_89_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.selectedPhase = \"middlegame\");\n    });\n    i0.ɵɵtext(90, \" Middle \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(91, \"button\", 43);\n    i0.ɵɵlistener(\"click\", function GameDetailComponent_div_1_Template_button_click_91_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.selectedPhase = \"endgame\");\n    });\n    i0.ɵɵtext(92, \" End \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(93, \"div\", 44);\n    i0.ɵɵtemplate(94, GameDetailComponent_div_1_div_94_Template, 8, 4, \"div\", 45)(95, GameDetailComponent_div_1_div_95_Template, 8, 4, \"div\", 45)(96, GameDetailComponent_div_1_div_96_Template, 8, 4, \"div\", 45);\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵclassMap(ctx_r1.getResultBadgeClass());\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.getResultText(), \" \");\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.game.event, \" \");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r1.playerName, \" vs \", ctx_r1.opponentName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r1.game.opening || \"Unknown Opening\", \" \\u2022 \", ctx_r1.game.date, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.game.result);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.getResultDescription());\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"moves\", ctx_r1.analysis || i0.ɵɵpureFunction0(32, _c0))(\"initialPosition\", ctx_r1.getInitialPosition());\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.analysis);\n    i0.ɵɵadvance(12);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.getPlayerAccuracy(), \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", ctx_r1.getPlayerAccuracy(), \"%\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.getOpponentAccuracy(), \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", ctx_r1.getOpponentAccuracy(), \"%\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r1.avgCentipawnLoss);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.blunders);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r1.inaccuracies);\n    i0.ɵɵadvance(7);\n    i0.ɵɵclassMap(ctx_r1.selectedPhase === \"opening\" ? \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-background text-foreground shadow-sm\" : \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(ctx_r1.selectedPhase === \"middlegame\" ? \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-background text-foreground shadow-sm\" : \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(ctx_r1.selectedPhase === \"endgame\" ? \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-background text-foreground shadow-sm\" : \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngSwitch\", ctx_r1.selectedPhase);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"opening\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"middlegame\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"endgame\");\n  }\n}\nfunction GameDetailComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 51);\n    i0.ɵɵelement(1, \"div\", 52);\n    i0.ɵɵelementEnd();\n  }\n}\nexport let GameDetailComponent = /*#__PURE__*/(() => {\n  class GameDetailComponent {\n    constructor(route, router, http) {\n      this.route = route;\n      this.router = router;\n      this.http = http;\n      this.game = null;\n      this.analysis = [];\n      this.accuracyData = null;\n      this.phaseData = null;\n      this.loading = true;\n      this.error = null;\n      this.currentMove = 0;\n      this.selectedPhase = 'opening';\n    }\n    ngOnInit() {\n      const gameId = this.route.snapshot.paramMap.get('id');\n      if (gameId) {\n        this.loadGameData(gameId);\n      }\n    }\n    loadGameData(gameId) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        try {\n          _this.loading = true;\n          const [gameResponse, analysisResponse, accuracyResponse, phaseResponse] = yield Promise.all([_this.http.get(`http://localhost:3000/api/games/${gameId}`).toPromise(), _this.http.get(`http://localhost:3000/api/games/${gameId}/analysis`).toPromise(), _this.http.get(`http://localhost:3000/api/games/${gameId}/accuracy`).toPromise(), _this.http.get(`http://localhost:3000/api/games/${gameId}/phases`).toPromise()]);\n          if (gameResponse && analysisResponse) {\n            _this.game = gameResponse;\n            _this.analysis = analysisResponse.analysis || [];\n            _this.accuracyData = accuracyResponse || null;\n            _this.phaseData = phaseResponse || null;\n          }\n        } catch (err) {\n          _this.error = err instanceof Error ? err.message : 'Failed to load game';\n        } finally {\n          _this.loading = false;\n        }\n      })();\n    }\n    get isPlayerWhite() {\n      return this.game?.white_player === 'AdvaitKumar1213';\n    }\n    get playerName() {\n      return this.isPlayerWhite ? this.game?.white_player || '' : this.game?.black_player || '';\n    }\n    get opponentName() {\n      return this.isPlayerWhite ? this.game?.black_player || '' : this.game?.white_player || '';\n    }\n    get movePairs() {\n      const pairs = [];\n      for (let i = 0; i < this.analysis.length; i += 2) {\n        const whiteMove = this.analysis[i];\n        const blackMove = this.analysis[i + 1];\n        pairs.push({\n          moveNumber: Math.floor(i / 2) + 1,\n          white: whiteMove,\n          black: blackMove\n        });\n      }\n      return pairs;\n    }\n    get playerMoves() {\n      return this.analysis.filter((_, idx) => this.isPlayerWhite ? idx % 2 === 0 : idx % 2 === 1);\n    }\n    get opponentMoves() {\n      return this.analysis.filter((_, idx) => this.isPlayerWhite ? idx % 2 === 1 : idx % 2 === 0);\n    }\n    get blunders() {\n      return this.playerMoves.filter(move => move.is_blunder).length;\n    }\n    get inaccuracies() {\n      return this.playerMoves.filter(move => !move.is_blunder && move.centipawn_loss > 100).length;\n    }\n    get avgCentipawnLoss() {\n      return this.playerMoves.length > 0 ? Math.round(this.playerMoves.reduce((sum, move) => sum + move.centipawn_loss, 0) / this.playerMoves.length) : 0;\n    }\n    getResultBadgeClass() {\n      const result = this.getResultText();\n      if (result === 'Win') return 'inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-success text-success-foreground';\n      if (result === 'Loss') return 'inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-destructive text-destructive-foreground';\n      return 'inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-muted text-muted-foreground';\n    }\n    getResultText() {\n      if (!this.game) return 'Draw';\n      if (this.game.result === '1-0') return this.isPlayerWhite ? 'Win' : 'Loss';\n      if (this.game.result === '0-1') return this.isPlayerWhite ? 'Loss' : 'Win';\n      return 'Draw';\n    }\n    getResultDescription() {\n      if (!this.game) return 'Draw';\n      if (this.game.result === '1-0') return 'White wins';\n      if (this.game.result === '0-1') return 'Black wins';\n      return 'Draw';\n    }\n    getMoveRowClass(moveIndex) {\n      return this.currentMove != null && Math.floor(this.currentMove / 2) === moveIndex ? 'border-accent bg-accent/10' : 'border-border hover:bg-muted/50';\n    }\n    getMoveQualityColor(centipawnLoss, isBlunder) {\n      if (isBlunder) return 'text-destructive';\n      if (centipawnLoss > 100) return 'text-warning';\n      return 'text-success';\n    }\n    formatEvaluation(evaluation) {\n      const evalValue = evaluation / 100;\n      return (evalValue > 0 ? '+' : '') + evalValue.toFixed(1);\n    }\n    getPlayerAccuracy() {\n      return this.accuracyData?.playerAccuracy || 0;\n    }\n    getOpponentAccuracy() {\n      return this.accuracyData?.opponentAccuracy || 0;\n    }\n    setCurrentMove(move) {\n      this.currentMove = Math.max(0, Math.min(this.analysis.length - 1, move));\n    }\n    previousMove() {\n      this.setCurrentMove(this.currentMove - 1);\n    }\n    nextMove() {\n      this.setCurrentMove(this.currentMove + 1);\n    }\n    goBack() {\n      this.router.navigate(['/games']);\n    }\n    getInitialPosition() {\n      // Standard starting position\n      return 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1';\n    }\n    onMoveChanged(moveIndex) {\n      this.currentMove = moveIndex;\n      // Additional logic for move change can be added here\n    }\n    getMoveQuality(move) {\n      if (move.is_blunder) return 'Blunder';\n      if (move.is_mistake) return 'Mistake';\n      if (move.is_inaccuracy) return 'Inaccuracy';\n      if (move.centipawn_loss <= 10) return 'Excellent';\n      return 'Good';\n    }\n    getMoveQualityClass(move) {\n      const quality = this.getMoveQuality(move).toLowerCase();\n      return `move-${quality}`;\n    }\n    static {\n      this.ɵfac = function GameDetailComponent_Factory(t) {\n        return new (t || GameDetailComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HttpClient));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: GameDetailComponent,\n        selectors: [[\"app-game-detail\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 4,\n        vars: 2,\n        consts: [[\"loadingTemplate\", \"\"], [\"class\", \"space-y-6\", 4, \"ngIf\", \"ngIfElse\"], [1, \"space-y-6\"], [1, \"flex\", \"items-center\", \"gap-4\"], [1, \"inline-flex\", \"items-center\", \"justify-center\", \"rounded-md\", \"text-sm\", \"font-medium\", \"ring-offset-background\", \"transition-colors\", \"focus-visible:outline-none\", \"focus-visible:ring-2\", \"focus-visible:ring-ring\", \"focus-visible:ring-offset-2\", \"disabled:pointer-events-none\", \"disabled:opacity-50\", \"hover:bg-accent\", \"hover:text-accent-foreground\", \"h-9\", \"px-3\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"mr-2\", \"h-4\", \"w-4\"], [\"d\", \"m15 18-6-6 6-6\"], [1, \"flex\", \"items-center\", \"gap-2\"], [1, \"inline-flex\", \"items-center\", \"rounded-full\", \"border\", \"px-2.5\", \"py-0.5\", \"text-xs\", \"font-semibold\", \"transition-colors\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-ring\", \"focus:ring-offset-2\", \"border-transparent\", \"bg-secondary\", \"text-secondary-foreground\", \"hover:bg-secondary/80\", \"gap-1\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"12\", \"height\", \"12\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"h-3\", \"w-3\"], [\"d\", \"M6 9H4.5a2.5 2.5 0 0 1 0-5H6\"], [\"d\", \"M18 9h1.5a2.5 2.5 0 0 0 0-5H18\"], [\"d\", \"M4 22h16\"], [\"d\", \"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22\"], [\"d\", \"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22\"], [\"d\", \"M18 2H6v7a6 6 0 0 0 12 0V2Z\"], [1, \"grid\", \"gap-6\", \"lg:grid-cols-3\"], [1, \"lg:col-span-2\", \"space-y-6\"], [1, \"rounded-lg\", \"border\", \"bg-card\", \"text-card-foreground\", \"shadow-sm\"], [1, \"flex\", \"flex-col\", \"space-y-1.5\", \"p-6\"], [1, \"flex\", \"items-center\", \"justify-between\"], [1, \"text-2xl\", \"font-semibold\", \"leading-none\", \"tracking-tight\"], [1, \"text-sm\", \"text-muted-foreground\"], [1, \"text-right\"], [1, \"text-2xl\", \"font-bold\", \"text-foreground\"], [1, \"text-xs\", \"text-muted-foreground\"], [1, \"p-6\", \"pt-0\"], [1, \"space-y-4\"], [3, \"moveChanged\", \"moves\", \"initialPosition\"], [1, \"space-y-2\"], [\"class\", \"flex items-center justify-between p-2 rounded hover:bg-muted/50 cursor-pointer\", 3, \"bg-muted\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"p-6\", \"pt-0\", \"space-y-4\"], [1, \"flex\", \"justify-between\", \"text-sm\"], [1, \"text-muted-foreground\"], [1, \"font-semibold\", \"text-success\"], [1, \"h-2\", \"w-full\", \"overflow-hidden\", \"rounded-full\", \"bg-muted\"], [1, \"h-full\", \"bg-success\"], [1, \"font-semibold\"], [1, \"h-full\", \"bg-chart-1\"], [1, \"pt-4\", \"space-y-3\", \"border-t\", \"border-border\"], [1, \"font-semibold\", \"text-destructive\"], [1, \"font-semibold\", \"text-warning\"], [1, \"inline-flex\", \"h-10\", \"items-center\", \"justify-center\", \"rounded-md\", \"bg-muted\", \"p-1\", \"text-muted-foreground\", \"w-full\"], [1, \"flex-1\", 3, \"click\"], [1, \"space-y-2\", \"pt-4\", 3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [1, \"flex\", \"items-center\", \"justify-between\", \"p-2\", \"rounded\", \"hover:bg-muted/50\", \"cursor-pointer\", 3, \"click\"], [1, \"text-sm\", \"font-medium\"], [1, \"font-mono\"], [1, \"flex\", \"items-center\", \"gap-1\"], [1, \"text-xs\"], [1, \"flex\", \"items-center\", \"justify-center\", \"h-64\"], [1, \"animate-spin\", \"rounded-full\", \"h-8\", \"w-8\", \"border-b-2\", \"border-gray-900\"]],\n        template: function GameDetailComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"app-layout\");\n            i0.ɵɵtemplate(1, GameDetailComponent_div_1_Template, 97, 33, \"div\", 1)(2, GameDetailComponent_ng_template_2_Template, 2, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            const loadingTemplate_r6 = i0.ɵɵreference(3);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.game)(\"ngIfElse\", loadingTemplate_r6);\n          }\n        },\n        dependencies: [CommonModule, i3.NgForOf, i3.NgIf, i3.NgSwitch, i3.NgSwitchCase, LayoutComponent, ChessBoardComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return GameDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}