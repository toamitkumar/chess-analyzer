<div class="import-container">
  <mat-toolbar color="primary">
    <span>PGN File Import</span>
  </mat-toolbar>

  <div class="content">
    <p class="subtitle">Upload your PGN files to analyze your chess games</p>

    <!-- Upload Area -->
    <mat-card 
      class="upload-card"
      [class.dragover]="isDragOver"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)">
      
      <mat-card-content class="upload-content">
        <mat-icon class="upload-icon">cloud_upload</mat-icon>
        <h3>Drop PGN files here or click to select</h3>
        <p>Supports single and multiple PGN files</p>
        
        <button mat-raised-button color="primary" (click)="fileInput.click()">
          Select Files
        </button>
        
        <input 
          #fileInput
          type="file" 
          accept=".pgn" 
          multiple 
          style="display: none"
          (change)="onFileSelect($event)">
      </mat-card-content>
    </mat-card>

    <!-- Progress Bar -->
    <mat-card *ngIf="isUploading" class="progress-card">
      <mat-card-content>
        <div class="progress-info">
          <span>Uploading files...</span>
          <span>{{ uploadProgress }}%</span>
        </div>
        <mat-progress-bar [value]="uploadProgress"></mat-progress-bar>
      </mat-card-content>
    </mat-card>

    <!-- Results -->
    <div *ngIf="results.length > 0" class="results-section">
      <mat-card 
        *ngFor="let result of results"
        class="result-card"
        [class.success]="result.success"
        [class.error]="!result.success">
        
        <mat-card-header>
          <mat-icon mat-card-avatar [color]="result.success ? 'primary' : 'warn'">
            {{ result.success ? 'check_circle' : 'error' }}
          </mat-icon>
          <mat-card-title>{{ result.filename }}</mat-card-title>
          <mat-card-subtitle>{{ result.message }}</mat-card-subtitle>
        </mat-card-header>
        
        <mat-card-content *ngIf="result.success && result.games">
          <p><strong>Games imported:</strong> {{ result.totalGames }}</p>
          
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                View game preview (first {{ result.games.length }})
              </mat-panel-title>
            </mat-expansion-panel-header>
            
            <div *ngFor="let game of result.games" class="game-preview">
              <div><strong>{{ game.white }} vs {{ game.black }}</strong></div>
              <div>Result: {{ game.result }} | Date: {{ game.date }}</div>
              <div>Moves: {{ game.moveCount }}</div>
            </div>
          </mat-expansion-panel>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
