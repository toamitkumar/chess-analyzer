{"ast":null,"code":"import _asyncToGenerator from \"/Users/amit.kumar3/projects/chess-analysis/chessify/newfrontend/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\nimport { LayoutComponent } from '../../components/layout/layout.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/chess-api.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nconst _c0 = a0 => [\"/games\", a0];\nconst _c1 = () => [];\nfunction GamesComponent_option_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r1);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(option_r1);\n  }\n}\nfunction GamesComponent_div_27_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 48);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 49);\n    i0.ɵɵelement(2, \"path\", 50)(3, \"path\", 51)(4, \"path\", 52)(5, \"path\", 53)(6, \"path\", 54)(7, \"path\", 55);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const game_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\" \", game_r2.event, \" \");\n  }\n}\nfunction GamesComponent_div_27_span_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const game_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", game_r2.white_elo, \" ELO\");\n  }\n}\nfunction GamesComponent_div_27_span_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Unrated\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction GamesComponent_div_27_span_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const game_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", game_r2.black_elo, \" ELO\");\n  }\n}\nfunction GamesComponent_div_27_span_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Unrated\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction GamesComponent_div_27_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 56);\n    i0.ɵɵelement(2, \"path\", 57)(3, \"circle\", 58);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"span\", 3);\n    i0.ɵɵtext(5, \"Accuracy:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 43);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const game_r2 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.getPlayerAccuracy(game_r2), \"%\");\n  }\n}\nfunction GamesComponent_div_27_div_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 59);\n    i0.ɵɵelement(2, \"circle\", 58)(3, \"line\", 60)(4, \"line\", 61);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(5, \"span\", 3);\n    i0.ɵɵtext(6, \"Blunders:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\", 43);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const game_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(game_r2.blunders);\n  }\n}\nfunction GamesComponent_div_27_div_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 62);\n    i0.ɵɵelement(2, \"path\", 63)(3, \"polyline\", 64);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"span\", 3);\n    i0.ɵɵtext(5, \"Opening:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 65);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const game_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(game_r2.opening);\n  }\n}\nfunction GamesComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"div\", 25)(2, \"div\", 26)(3, \"div\", 27)(4, \"div\", 28)(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, GamesComponent_div_27_span_7_Template, 9, 1, \"span\", 29);\n    i0.ɵɵelementStart(8, \"span\", 6);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 4)(11, \"div\", 5)(12, \"div\", 30);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(13, \"svg\", 31);\n    i0.ɵɵelement(14, \"path\", 32)(15, \"path\", 33);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(16, \"div\")(17, \"p\", 34);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 35);\n    i0.ɵɵtemplate(20, GamesComponent_div_27_span_20_Template, 2, 1, \"span\", 36)(21, GamesComponent_div_27_span_21_Template, 2, 0, \"span\", 36);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"span\", 3);\n    i0.ɵɵtext(23, \"vs\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"div\", 5)(25, \"div\", 37);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(26, \"svg\", 38);\n    i0.ɵɵelement(27, \"path\", 32)(28, \"path\", 33);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(29, \"div\")(30, \"p\", 34);\n    i0.ɵɵtext(31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"div\", 35);\n    i0.ɵɵtemplate(33, GamesComponent_div_27_span_33_Template, 2, 1, \"span\", 36)(34, GamesComponent_div_27_span_34_Template, 2, 0, \"span\", 36);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(35, \"div\", 39)(36, \"div\", 5);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(37, \"svg\", 40);\n    i0.ɵɵelement(38, \"path\", 41)(39, \"path\", 42);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(40, \"span\", 3);\n    i0.ɵɵtext(41, \"Moves:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"span\", 43);\n    i0.ɵɵtext(43);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(44, GamesComponent_div_27_div_44_Template, 8, 1, \"div\", 44)(45, GamesComponent_div_27_div_45_Template, 9, 1, \"div\", 44)(46, GamesComponent_div_27_div_46_Template, 8, 1, \"div\", 44);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(47, \"button\", 45);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(48, \"svg\", 46);\n    i0.ɵɵelement(49, \"path\", 47);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const game_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(16, _c0, game_r2.id));\n    i0.ɵɵadvance(5);\n    i0.ɵɵclassMap(\"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium \" + ctx_r2.getResultBadgeClass(game_r2.result, game_r2.playerColor));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.getResultText(game_r2.result, game_r2.playerColor), \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", game_r2.event);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.formatDate(game_r2.date));\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(game_r2.white_player);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", game_r2.white_elo);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !game_r2.white_elo);\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate(game_r2.black_player);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", game_r2.black_elo);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !game_r2.black_elo);\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(game_r2.moves_count);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", game_r2.accuracy);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", game_r2.blunders !== undefined);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", game_r2.opening);\n  }\n}\nfunction GamesComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 66)(1, \"div\", 3)(2, \"p\", 67);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 68);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"No \", ctx_r2.getFilterDisplayName(), \" found\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.getEmptyStateMessage());\n  }\n}\nfunction GamesComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 69)(1, \"div\", 3);\n    i0.ɵɵtext(2, \"Loading games...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction GamesComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 70)(1, \"div\", 71);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Error loading games: \", ctx_r2.error, \"\");\n  }\n}\nfunction GamesComponent_div_31_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 78);\n    i0.ɵɵlistener(\"click\", function GamesComponent_div_31_button_8_Template_button_click_0_listener() {\n      const i_r6 = i0.ɵɵrestoreView(_r5).index;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.goToPage(i_r6 + 1));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const i_r6 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMap(\"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 h-8 w-8 \" + (ctx_r2.currentPage === i_r6 + 1 ? \"bg-primary text-primary-foreground\" : \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\"));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", i_r6 + 1, \" \");\n  }\n}\nfunction GamesComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 72)(1, \"div\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 5)(4, \"button\", 73);\n    i0.ɵɵlistener(\"click\", function GamesComponent_div_31_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.previousPage());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(5, \"svg\", 74);\n    i0.ɵɵelement(6, \"path\", 75);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(7, \"div\", 76);\n    i0.ɵɵtemplate(8, GamesComponent_div_31_button_8_Template, 2, 3, \"button\", 77);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 73);\n    i0.ɵɵlistener(\"click\", function GamesComponent_div_31_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.nextPage());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(10, \"svg\", 74);\n    i0.ɵɵelement(11, \"path\", 47);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\" Showing \", (ctx_r2.currentPage - 1) * ctx_r2.gamesPerPage + 1, \" to \", ctx_r2.Math.min(ctx_r2.currentPage * ctx_r2.gamesPerPage, ctx_r2.totalFilteredGames), \" of \", ctx_r2.totalFilteredGames, \" games \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r2.currentPage === 1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(6, _c1).constructor(ctx_r2.totalPages));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"disabled\", ctx_r2.currentPage === ctx_r2.totalPages);\n  }\n}\nexport let GamesComponent = /*#__PURE__*/(() => {\n  class GamesComponent {\n    constructor(chessApi) {\n      this.chessApi = chessApi;\n      this.filter = 'all';\n      this.games = [];\n      this.loading = true;\n      this.error = null;\n      // Pagination properties\n      this.currentPage = 1;\n      this.gamesPerPage = 10;\n      this.gamesPerPageOptions = [5, 10, 20, 50];\n      // Make Math available in template\n      this.Math = Math;\n    }\n    get targetPlayer() {\n      return this.chessApi.targetPlayer;\n    }\n    ngOnInit() {\n      this.loadGames();\n    }\n    loadGames() {\n      var _this = this;\n      this.loading = true;\n      this.error = null;\n      this.chessApi.getGames().subscribe({\n        next: function () {\n          var _ref = _asyncToGenerator(function* (games) {\n            // Process games and add analysis data\n            const gamesWithAnalysis = yield Promise.all(games.map(/*#__PURE__*/function () {\n              var _ref2 = _asyncToGenerator(function* (game) {\n                const gameWithColor = {\n                  ...game,\n                  playerColor: game.white_player === _this.targetPlayer ? 'white' : 'black'\n                };\n                try {\n                  const analysis = yield _this.chessApi.getGameAnalysis(game.id).toPromise();\n                  // Calculate player-specific blunders (only target player's moves)\n                  const isPlayerWhite = gameWithColor.playerColor === 'white';\n                  const playerMoves = analysis.analysis?.filter(move => isPlayerWhite && move.move_number % 2 === 1 || !isPlayerWhite && move.move_number % 2 === 0) || [];\n                  const blunderCount = playerMoves.filter(move => move.is_blunder === 1).length;\n                  // Extract ECO and opening from PGN content\n                  const ecoMatch = analysis.game?.pgn_content?.match(/\\[ECO \"([^\"]+)\"\\]/);\n                  const eco = ecoMatch ? ecoMatch[1] : undefined;\n                  // Calculate accuracy based on centipawn loss\n                  const accuracy = _this.calculateAccuracyFromAnalysis(analysis.analysis, gameWithColor.playerColor);\n                  return {\n                    ...gameWithColor,\n                    blunders: blunderCount,\n                    eco: eco,\n                    opening: game.opening || 'Unknown Opening',\n                    accuracy: accuracy\n                  };\n                } catch (error) {\n                  console.warn(`Failed to load analysis for game ${game.id}:`, error);\n                  return gameWithColor;\n                }\n              });\n              return function (_x2) {\n                return _ref2.apply(this, arguments);\n              };\n            }()));\n            // Sort games by date (newest first)\n            _this.games = gamesWithAnalysis.sort((a, b) => {\n              const dateA = new Date(a.date.replace(/\\./g, '-'));\n              const dateB = new Date(b.date.replace(/\\./g, '-'));\n              return dateB.getTime() - dateA.getTime();\n            });\n            _this.loading = false;\n            console.log('Games with analysis loaded:', _this.games);\n          });\n          return function next(_x) {\n            return _ref.apply(this, arguments);\n          };\n        }(),\n        error: err => {\n          this.error = err.message || 'Failed to load games';\n          this.loading = false;\n          console.error('Error loading games:', err);\n        }\n      });\n    }\n    get filteredGames() {\n      let filtered = this.games;\n      if (this.filter !== 'all') {\n        filtered = this.games.filter(game => {\n          const isWin = game.result === '1-0' && game.playerColor === 'white' || game.result === '0-1' && game.playerColor === 'black';\n          const isDraw = game.result === '1/2-1/2';\n          const isLoss = !isWin && !isDraw;\n          switch (this.filter) {\n            case 'wins':\n              return isWin;\n            case 'losses':\n              return isLoss;\n            case 'draws':\n              return isDraw;\n            default:\n              return true;\n          }\n        });\n      }\n      // Apply pagination\n      const startIndex = (this.currentPage - 1) * this.gamesPerPage;\n      const endIndex = startIndex + this.gamesPerPage;\n      return filtered.slice(startIndex, endIndex);\n    }\n    get totalFilteredGames() {\n      if (this.filter === 'all') return this.games.length;\n      return this.games.filter(game => {\n        const isWin = game.result === '1-0' && game.playerColor === 'white' || game.result === '0-1' && game.playerColor === 'black';\n        const isDraw = game.result === '1/2-1/2';\n        const isLoss = !isWin && !isDraw;\n        switch (this.filter) {\n          case 'wins':\n            return isWin;\n          case 'losses':\n            return isLoss;\n          case 'draws':\n            return isDraw;\n          default:\n            return true;\n        }\n      }).length;\n    }\n    get totalPages() {\n      return Math.ceil(this.totalFilteredGames / this.gamesPerPage);\n    }\n    formatDate(dateStr) {\n      // Convert \"2025.10.24\" format to readable date\n      const parts = dateStr.split('.');\n      if (parts.length === 3) {\n        const date = new Date(parseInt(parts[0]), parseInt(parts[1]) - 1, parseInt(parts[2]));\n        return date.toLocaleDateString();\n      }\n      return dateStr;\n    }\n    getResultBadgeClass(result, playerColor) {\n      const isWin = result === '1-0' && playerColor === 'white' || result === '0-1' && playerColor === 'black';\n      const isDraw = result === '1/2-1/2';\n      if (isWin) return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300';\n      if (isDraw) return 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300';\n      return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300';\n    }\n    getResultText(result, playerColor) {\n      const isWin = result === '1-0' && playerColor === 'white' || result === '0-1' && playerColor === 'black';\n      const isDraw = result === '1/2-1/2';\n      if (isWin) return 'Win';\n      if (isDraw) return 'Draw';\n      return 'Loss';\n    }\n    getFilterDisplayName() {\n      switch (this.filter) {\n        case 'wins':\n          return 'wins';\n        case 'losses':\n          return 'losses';\n        case 'draws':\n          return 'draws';\n        default:\n          return 'games';\n      }\n    }\n    getEmptyStateMessage() {\n      switch (this.filter) {\n        case 'wins':\n          return 'You haven\\'t won any games yet. Keep practicing!';\n        case 'losses':\n          return 'Great! You haven\\'t lost any games.';\n        case 'draws':\n          return 'You haven\\'t drawn any games yet. All your games have decisive results.';\n        default:\n          return 'No games found. Upload some PGN files to get started.';\n      }\n    }\n    calculateAccuracy(analysis, totalMoves) {\n      if (!analysis || analysis.length === 0) return {\n        white: 0,\n        black: 0\n      };\n      const whiteMoves = analysis.filter((_, i) => i % 2 === 0); // Odd indices (1st, 3rd, 5th...)\n      const blackMoves = analysis.filter((_, i) => i % 2 === 1); // Even indices (2nd, 4th, 6th...)\n      const whiteAccuracy = whiteMoves.length > 0 ? Math.round((1 - whiteMoves.reduce((sum, move) => sum + move.centipawn_loss, 0) / (whiteMoves.length * 100)) * 100) : 0;\n      const blackAccuracy = blackMoves.length > 0 ? Math.round((1 - blackMoves.reduce((sum, move) => sum + move.centipawn_loss, 0) / (blackMoves.length * 100)) * 100) : 0;\n      return {\n        white: Math.max(0, Math.min(100, whiteAccuracy)),\n        black: Math.max(0, Math.min(100, blackAccuracy))\n      };\n    }\n    calculateAccuracyFromAnalysis(analysis, playerColor) {\n      if (!analysis || analysis.length === 0) return {\n        white: 0,\n        black: 0\n      };\n      // Separate moves by color (move_number 1, 3, 5... are white, 2, 4, 6... are black)\n      const whiteMoves = analysis.filter(move => move.move_number % 2 === 1);\n      const blackMoves = analysis.filter(move => move.move_number % 2 === 0);\n      const calculatePlayerAccuracy = moves => {\n        if (moves.length === 0) return 0;\n        const avgCentipawnLoss = moves.reduce((sum, move) => sum + (move.centipawn_loss || 0), 0) / moves.length;\n        // Convert centipawn loss to accuracy percentage (lower loss = higher accuracy)\n        return Math.max(0, Math.min(100, Math.round(100 - avgCentipawnLoss / 2)));\n      };\n      return {\n        white: calculatePlayerAccuracy(whiteMoves),\n        black: calculatePlayerAccuracy(blackMoves)\n      };\n    }\n    getPlayerAccuracy(game) {\n      if (!game.accuracy) return 0;\n      return game.playerColor === 'white' ? game.accuracy.white : game.accuracy.black;\n    }\n    onFilterChange() {\n      this.currentPage = 1; // Reset to first page when filter changes\n    }\n    onGamesPerPageChange() {\n      this.currentPage = 1; // Reset to first page when changing page size\n    }\n    goToPage(page) {\n      if (page >= 1 && page <= this.totalPages) {\n        this.currentPage = page;\n      }\n    }\n    previousPage() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n      }\n    }\n    nextPage() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n      }\n    }\n    static {\n      this.ɵfac = function GamesComponent_Factory(t) {\n        return new (t || GamesComponent)(i0.ɵɵdirectiveInject(i1.ChessApiService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: GamesComponent,\n        selectors: [[\"app-games\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 32,\n        vars: 8,\n        consts: [[1, \"space-y-6\"], [1, \"flex\", \"items-center\", \"justify-between\"], [1, \"text-3xl\", \"font-bold\", \"text-foreground\"], [1, \"text-muted-foreground\"], [1, \"flex\", \"items-center\", \"gap-4\"], [1, \"flex\", \"items-center\", \"gap-2\"], [1, \"text-sm\", \"text-muted-foreground\"], [1, \"flex\", \"h-8\", \"w-16\", \"items-center\", \"justify-center\", \"rounded-md\", \"border\", \"border-input\", \"bg-background\", \"px-2\", \"py-1\", \"text-sm\", 3, \"ngModelChange\", \"ngModel\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"relative\"], [1, \"flex\", \"h-10\", \"w-[180px]\", \"items-center\", \"justify-between\", \"rounded-md\", \"border\", \"border-input\", \"bg-background\", \"px-3\", \"py-2\", \"text-sm\", \"ring-offset-background\", \"placeholder:text-muted-foreground\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-ring\", \"focus:ring-offset-2\", \"disabled:cursor-not-allowed\", \"disabled:opacity-50\", \"appearance-none\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"all\"], [\"value\", \"wins\"], [\"value\", \"losses\"], [\"value\", \"draws\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"absolute\", \"right-3\", \"top-1/2\", \"h-4\", \"w-4\", \"-translate-y-1/2\", \"opacity-50\", \"pointer-events-none\"], [\"d\", \"m6 9 6 6 6-6\"], [1, \"grid\", \"gap-4\"], [\"class\", \"rounded-lg border bg-card text-card-foreground shadow-sm transition-all hover:shadow-lg cursor-pointer\", 3, \"routerLink\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-center py-12\", 4, \"ngIf\"], [\"class\", \"flex justify-center items-center py-8\", 4, \"ngIf\"], [\"class\", \"rounded-lg border border-red-200 bg-red-50 p-4\", 4, \"ngIf\"], [\"class\", \"flex items-center justify-between border-t pt-4\", 4, \"ngIf\"], [3, \"value\"], [1, \"rounded-lg\", \"border\", \"bg-card\", \"text-card-foreground\", \"shadow-sm\", \"transition-all\", \"hover:shadow-lg\", \"cursor-pointer\", 3, \"routerLink\"], [1, \"p-6\"], [1, \"flex\", \"items-start\", \"justify-between\"], [1, \"flex-1\", \"space-y-3\"], [1, \"flex\", \"items-center\", \"gap-3\"], [\"class\", \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80 gap-1\", 4, \"ngIf\"], [1, \"flex\", \"h-8\", \"w-8\", \"items-center\", \"justify-center\", \"rounded-full\", \"bg-muted\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"h-4\", \"w-4\", \"text-foreground\"], [\"d\", \"M2 20h20l-2-6-4 2-4-4-4 4-4-2z\"], [\"d\", \"M6 4l2 4 4-2 4 2 2-4\"], [1, \"text-sm\", \"font-medium\", \"text-foreground\"], [1, \"flex\", \"items-center\", \"gap-1\", \"text-xs\", \"text-muted-foreground\"], [4, \"ngIf\"], [1, \"flex\", \"h-8\", \"w-8\", \"items-center\", \"justify-center\", \"rounded-full\", \"bg-secondary\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"h-4\", \"w-4\", \"text-secondary-foreground\"], [1, \"grid\", \"grid-cols-2\", \"md:grid-cols-4\", \"gap-4\", \"text-sm\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"h-4\", \"w-4\", \"text-muted-foreground\"], [\"d\", \"M9 11H5a2 2 0 0 0-2 2v3c0 5.5 4.5 10 10 10s10-4.5 10-10v-3a2 2 0 0 0-2-2h-4\"], [\"d\", \"M9 7V4a2 2 0 0 1 4 0v3\"], [1, \"text-foreground\", \"font-medium\"], [\"class\", \"flex items-center gap-2\", 4, \"ngIf\"], [1, \"inline-flex\", \"items-center\", \"justify-center\", \"rounded-md\", \"text-sm\", \"font-medium\", \"ring-offset-background\", \"transition-colors\", \"focus-visible:outline-none\", \"focus-visible:ring-2\", \"focus-visible:ring-ring\", \"focus-visible:ring-offset-2\", \"disabled:pointer-events-none\", \"disabled:opacity-50\", \"hover:bg-accent\", \"hover:text-accent-foreground\", \"h-10\", \"w-10\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"h-5\", \"w-5\"], [\"d\", \"m9 18 6-6-6-6\"], [1, \"inline-flex\", \"items-center\", \"rounded-full\", \"border\", \"px-2.5\", \"py-0.5\", \"text-xs\", \"font-semibold\", \"transition-colors\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-ring\", \"focus:ring-offset-2\", \"border-transparent\", \"bg-secondary\", \"text-secondary-foreground\", \"hover:bg-secondary/80\", \"gap-1\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"12\", \"height\", \"12\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"h-3\", \"w-3\"], [\"d\", \"M6 9H4.5a2.5 2.5 0 0 1 0-5H6\"], [\"d\", \"M18 9h1.5a2.5 2.5 0 0 0 0-5H18\"], [\"d\", \"M4 22h16\"], [\"d\", \"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22\"], [\"d\", \"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22\"], [\"d\", \"M18 2H6v7a6 6 0 0 0 12 0V2Z\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"h-4\", \"w-4\", \"text-green-600\"], [\"d\", \"M9 12l2 2 4-4\"], [\"cx\", \"12\", \"cy\", \"12\", \"r\", \"10\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"h-4\", \"w-4\", \"text-red-600\"], [\"x1\", \"12\", \"y1\", \"8\", \"x2\", \"12\", \"y2\", \"12\"], [\"x1\", \"12\", \"y1\", \"16\", \"x2\", \"12.01\", \"y2\", \"16\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"h-4\", \"w-4\", \"text-blue-600\"], [\"d\", \"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\"], [\"points\", \"14,2 14,8 20,8\"], [1, \"text-foreground\", \"font-medium\", \"text-xs\"], [1, \"text-center\", \"py-12\"], [1, \"text-lg\", \"font-medium\"], [1, \"text-sm\", \"mt-2\"], [1, \"flex\", \"justify-center\", \"items-center\", \"py-8\"], [1, \"rounded-lg\", \"border\", \"border-red-200\", \"bg-red-50\", \"p-4\"], [1, \"text-red-800\"], [1, \"flex\", \"items-center\", \"justify-between\", \"border-t\", \"pt-4\"], [1, \"inline-flex\", \"items-center\", \"justify-center\", \"rounded-md\", \"text-sm\", \"font-medium\", \"ring-offset-background\", \"transition-colors\", \"focus-visible:outline-none\", \"focus-visible:ring-2\", \"focus-visible:ring-ring\", \"focus-visible:ring-offset-2\", \"disabled:pointer-events-none\", \"disabled:opacity-50\", \"border\", \"border-input\", \"bg-background\", \"hover:bg-accent\", \"hover:text-accent-foreground\", \"h-8\", \"w-8\", 3, \"click\", \"disabled\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"16\", \"height\", \"16\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 1, \"h-4\", \"w-4\"], [\"d\", \"m15 18-6-6 6-6\"], [1, \"flex\", \"items-center\", \"gap-1\"], [3, \"class\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"click\"]],\n        template: function GamesComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"app-layout\")(1, \"div\", 0)(2, \"div\", 1)(3, \"div\")(4, \"h1\", 2);\n            i0.ɵɵtext(5, \"Game Analysis\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"p\", 3);\n            i0.ɵɵtext(7, \"Review and analyze your chess games\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"div\", 4)(9, \"div\", 5)(10, \"label\", 6);\n            i0.ɵɵtext(11, \"Games per page:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"select\", 7);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function GamesComponent_Template_select_ngModelChange_12_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.gamesPerPage, $event) || (ctx.gamesPerPage = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"ngModelChange\", function GamesComponent_Template_select_ngModelChange_12_listener() {\n              return ctx.onGamesPerPageChange();\n            });\n            i0.ɵɵtemplate(13, GamesComponent_option_13_Template, 2, 2, \"option\", 8);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(14, \"div\", 9)(15, \"select\", 10);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function GamesComponent_Template_select_ngModelChange_15_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.filter, $event) || (ctx.filter = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"ngModelChange\", function GamesComponent_Template_select_ngModelChange_15_listener() {\n              return ctx.onFilterChange();\n            });\n            i0.ɵɵelementStart(16, \"option\", 11);\n            i0.ɵɵtext(17, \"All Games\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"option\", 12);\n            i0.ɵɵtext(19, \"Wins Only\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"option\", 13);\n            i0.ɵɵtext(21, \"Losses Only\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"option\", 14);\n            i0.ɵɵtext(23, \"Draws Only\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(24, \"svg\", 15);\n            i0.ɵɵelement(25, \"path\", 16);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(26, \"div\", 17);\n            i0.ɵɵtemplate(27, GamesComponent_div_27_Template, 50, 18, \"div\", 18)(28, GamesComponent_div_28_Template, 6, 2, \"div\", 19);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(29, GamesComponent_div_29_Template, 3, 0, \"div\", 20)(30, GamesComponent_div_30_Template, 3, 1, \"div\", 21)(31, GamesComponent_div_31_Template, 12, 7, \"div\", 22);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(12);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.gamesPerPage);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngForOf\", ctx.gamesPerPageOptions);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.filter);\n            i0.ɵɵadvance(12);\n            i0.ɵɵproperty(\"ngForOf\", ctx.filteredGames);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.filteredGames.length === 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.totalPages > 1);\n          }\n        },\n        dependencies: [CommonModule, i2.NgForOf, i2.NgIf, RouterModule, i3.RouterLink, FormsModule, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel, HttpClientModule, LayoutComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return GamesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}