{"ast":null,"code":"import { setVisible, createEl } from './util.js';\nimport { colors, files, ranks } from './types.js';\nimport { createElement as createSVG, setAttributes, createDefs } from './svg.js';\nexport function renderWrap(element, s) {\n  // .cg-wrap (element passed to Chessground)\n  //   cg-container\n  //     cg-board\n  //     svg.cg-shapes\n  //       defs\n  //       g\n  //     svg.cg-custom-svgs\n  //       g\n  //     cg-auto-pieces\n  //     coords.ranks\n  //     coords.files\n  //     piece.ghost\n  element.innerHTML = '';\n  // ensure the cg-wrap class is set\n  // so bounds calculation can use the CSS width/height values\n  // add that class yourself to the element before calling chessground\n  // for a slight performance improvement! (avoids recomputing style)\n  element.classList.add('cg-wrap');\n  for (const c of colors) element.classList.toggle('orientation-' + c, s.orientation === c);\n  element.classList.toggle('manipulable', !s.viewOnly);\n  const container = createEl('cg-container');\n  element.appendChild(container);\n  const board = createEl('cg-board');\n  container.appendChild(board);\n  let shapesBelow;\n  let shapes;\n  let customBelow;\n  let custom;\n  let autoPieces;\n  if (s.drawable.visible) {\n    [shapesBelow, shapes] = ['cg-shapes-below', 'cg-shapes'].map(cls => svgContainer(cls, true));\n    [customBelow, custom] = ['cg-custom-below', 'cg-custom-svgs'].map(cls => svgContainer(cls, false));\n    autoPieces = createEl('cg-auto-pieces');\n    container.appendChild(shapesBelow);\n    container.appendChild(customBelow);\n    container.appendChild(shapes);\n    container.appendChild(custom);\n    container.appendChild(autoPieces);\n  }\n  if (s.coordinates) {\n    const orientClass = s.orientation === 'black' ? ' black' : '';\n    const ranksPositionClass = s.ranksPosition === 'left' ? ' left' : '';\n    if (s.coordinatesOnSquares) {\n      const rankN = s.orientation === 'white' ? i => i + 1 : i => 8 - i;\n      files.forEach((f, i) => container.appendChild(renderCoords(ranks.map(r => f + r), 'squares rank' + rankN(i) + orientClass + ranksPositionClass)));\n    } else {\n      container.appendChild(renderCoords(ranks, 'ranks' + orientClass + ranksPositionClass));\n      container.appendChild(renderCoords(files, 'files' + orientClass));\n    }\n  }\n  let ghost;\n  if (s.draggable.enabled && s.draggable.showGhost) {\n    ghost = createEl('piece', 'ghost');\n    setVisible(ghost, false);\n    container.appendChild(ghost);\n  }\n  return {\n    board,\n    container,\n    wrap: element,\n    ghost,\n    shapes,\n    shapesBelow,\n    custom,\n    customBelow,\n    autoPieces\n  };\n}\nfunction svgContainer(cls, isShapes) {\n  const svg = setAttributes(createSVG('svg'), {\n    class: cls,\n    viewBox: isShapes ? '-4 -4 8 8' : '-3.5 -3.5 8 8',\n    preserveAspectRatio: 'xMidYMid slice'\n  });\n  if (isShapes) svg.appendChild(createDefs());\n  svg.appendChild(createSVG('g'));\n  return svg;\n}\nfunction renderCoords(elems, className) {\n  const el = createEl('coords', className);\n  let f;\n  for (const elem of elems) {\n    f = createEl('coord');\n    f.textContent = elem;\n    el.appendChild(f);\n  }\n  return el;\n}\n//# sourceMappingURL=wrap.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}