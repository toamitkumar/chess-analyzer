
> chessify-analyzer@1.0.0 test
> jest

  console.log
    Analyzing test.pgn...

      at ChessAnalyzer.log [as analyzeFile] (analyzer.js:91:13)

  console.log
    Analysis saved to test_analysis.json

      at ChessAnalyzer.log [as analyzeFile] (analyzer.js:98:13)

FAIL ./analyzer.test.js (10.172 s)
  ChessAnalyzer
    ✓ constructor initializes correctly (1 ms)
    ✓ analyzePGN throws error for invalid PGN (9 ms)
    ✓ analyzeFile reads and processes file (19 ms)
  main function
    ✕ shows usage when no args (5003 ms)
    ✕ shows error for missing file (5001 ms)

  ● main function › shows usage when no args

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      83 |   });
      84 |
    > 85 |   test('shows usage when no args', async () => {
         |   ^
      86 |     await main([]);
      87 |     expect(process.exit).toHaveBeenCalledWith(1);
      88 |   });

      at test (analyzer.test.js:85:3)
      at Object.describe (analyzer.test.js:64:1)

  ● main function › shows error for missing file

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      88 |   });
      89 |
    > 90 |   test('shows error for missing file', async () => {
         |   ^
      91 |     fs.existsSync.mockReturnValue(false);
      92 |     await main(['missing.pgn']);
      93 |     expect(process.exit).toHaveBeenCalledWith(1);

      at test (analyzer.test.js:90:3)
      at Object.describe (analyzer.test.js:64:1)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 3 passed, 5 total
Snapshots:   0 total
Time:        10.21 s, estimated 11 s
Ran all test suites.
Jest did not exit one second after the test run has completed.

'This usually means that there are asynchronous operations that weren't stopped in your tests. Consider running Jest with `--detectOpenHandles` to troubleshoot this issue.
